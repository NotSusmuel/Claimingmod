import{u as e,aB as t,d as n,b6 as o,r as s,cB as a,E as i,bh as r,bg as l,G as c,c as u,W as d,J as p,av as m,a as f,S as v,b as y,t as b,y as h,T as g,cu as _,au as k,k as w,n as x,a0 as I,U as S,as as M,p as C,aQ as D,aP as T,cY as B,H as A,L,X as j,e as V,g as E,F as P,D as z,aG as R,q as N,aq as H,w as U,B as q,O as W,h as F,cy as K,a9 as O,z as J}from"./index_3.11.0.22--2602021337_b7dc42e999.js";import{_ as Y,a as G}from"./MessageForm_3.11.0.22--2602021337_b7dc42e999.js";import{e as Q}from"./RecurrenceSettings_3.11.0.22--2602021337_b7dc42e999.js";import{A as Z,_ as $}from"./AppointmentMySurveyResult_3.11.0.22--2602021337_b7dc42e999.js";import{_ as X}from"./MessageViewAttachment.vue_vue_type_script_setup_true_lang_3.11.0.22--2602021337_b7dc42e999.js";import{_ as ee}from"./MessageTags.vue_vue_type_script_setup_true_lang_3.11.0.22--2602021337_b7dc42e999.js";import{_ as te}from"./PersonLabel.vue_vue_type_script_setup_true_lang_3.11.0.22--2602021337_b7dc42e999.js";import{_ as ne}from"./MessagePersonButton_3.11.0.22--2602021337_b7dc42e999.js";import{useNavigationStore as oe}from"./navigation_3.11.0.22--2602021337_b7dc42e999.js";import{g as se,b as ae,c as ie}from"./todoUtils_3.11.0.22--2602021337_b7dc42e999.js";import{u as re}from"./useTodoDefaultCollectionHandler_3.11.0.22--2602021337_b7dc42e999.js";import{_ as le}from"./Skeleton.vue_vue_type_script_setup_true_lang_3.11.0.22--2602021337_b7dc42e999.js";(function(e,t){const n=fe,o=e();while(!![])try{const e=parseInt(n(145))/1*(-parseInt(n(173))/2)+-parseInt(n(166))/3+parseInt(n(164))/4*(-parseInt(n(167))/5)+parseInt(n(160))/6*(parseInt(n(144))/7)+parseInt(n(155))/8+parseInt(n(174))/9+parseInt(n(162))/10;if(e===t)break;else o["push"](o["shift"]())}catch(s){o["push"](o["shift"]())}})(de,359596);const ce=function(){let e=!![];return function(t,n){const o=e?function(){const e=fe;if(n){const o=n[e(151)](t,arguments);return n=null,o}}:function(){};return e=![],o}}(),ue=ce(void 0,(function(){const e=fe;return ue[e(141)]()[e(146)](e(161))[e(141)]()["constructor"](ue)[e(146)](e(161))}));ue();function de(){const e=["search","table","trace","prioUrgent","length","apply","constructor","console","prioHigh","1460456ipcmJG","prioException","prototype",'{}.constructor("return this")( )',"Urgent","2719020heyrYw","(((.+)+)+)+$","4680660SiDNZg","High","36xYpFwE","log","1088157AMuphT","150615tGwusA","prioNormal","Exception","bind","Normal","exception","1022038CRmzNV","3605832BVoZUd","toString","error","warn","7fBDemV","1OxAMZO"];de=function(){return e};return de()}const pe=function(){let e=!![];return function(t,n){const o=e?function(){const e=fe;if(n){const o=n[e(151)](t,arguments);return n=null,o}}:function(){};return e=![],o}}(),me=pe(void 0,(function(){const e=fe,t=function(){const e=fe;let t;try{t=Function("return (function() "+e(158)+");")()}catch(n){t=window}return t},n=t(),o=n[e(153)]=n[e(153)]||{},s=[e(165),e(143),"info",e(142),e(172),e(147),e(148)];for(let a=0;a<s[e(150)];a++){const t=pe[e(152)][e(157)][e(170)](pe),n=s[a],i=o[n]||t;t["__proto__"]=pe["bind"](pe),t[e(141)]=i["toString"]["bind"](i),o[n]=t}}));me();function fe(e,t){const n=de();return fe=function(e,t){e-=141;let o=n[e];return o},fe(e,t)}function ve(n){const o=fe,s=e(),a={[t[o(163)]]:s[o(154)],[t[o(171)]]:s[o(168)],[t[o(159)]]:s[o(149)],[t[o(169)]]:s[o(156)]};return a[n]}function ye(e,t){const n=we();return ye=function(e,t){e-=312;let o=n[e];return o},ye(e,t)}(function(e,t){const n=ye,o=e();while(!![])try{const e=parseInt(n(348))/1*(parseInt(n(328))/2)+parseInt(n(340))/3+-parseInt(n(347))/4+parseInt(n(331))/5+parseInt(n(339))/6*(-parseInt(n(326))/7)+parseInt(n(335))/8*(-parseInt(n(314))/9)+parseInt(n(349))/10;if(e===t)break;else o["push"](o["shift"]())}catch(s){o["push"](o["shift"]())}})(we,381281);const be=function(){let e=!![];return function(t,n){const o=e?function(){if(n){const e=n["apply"](t,arguments);return n=null,e}}:function(){};return e=![],o}}(),he=be(void 0,(function(){const e=ye;return he[e(346)]()[e(343)]("(((.+)+)+)+$")[e(346)]()[e(338)](he)[e(343)](e(318))}));he();const ge=function(){let e=!![];return function(t,n){const o=e?function(){const e=ye;if(n){const o=n[e(330)](t,arguments);return n=null,o}}:function(){};return e=![],o}}(),_e=ge(void 0,(function(){const e=ye;let t;try{const n=Function("return (function() "+e(344)+");");t=n()}catch(s){t=window}const n=t["console"]=t[e(321)]||{},o=[e(345),e(327),e(316),e(312),e(313),e(329),e(350)];for(let a=0;a<o[e(324)];a++){const t=ge["constructor"][e(332)][e(325)](ge),s=o[a],i=n[s]||t;t[e(322)]=ge[e(325)](ge),t[e(346)]=i[e(346)]["bind"](i),n[s]=t}}));_e();const ke=["placeholder","maxlength"];function we(){const e=["constructor","31938NjsILA","102039gcjZnJ","class","debounceDelay","search",'{}.constructor("return this")( )',"log","toString","1792164izjpeJ","1202MfUuCS","11098740VkXnwU","trace","height","error","exception","45JihUMd","trim","info","style","(((.+)+)+)+$","maxLength","value","console","__proto__","scrollHeight","length","bind","749HOXMhS","warn","576WQNpoO","table","apply","2945325ddeOyj","prototype","modelValue","target","1088392tnYzKx","flush","notes"];we=function(){return e};return we()}const xe=n({__name:"Textarea",props:{modelValue:{},maxLength:{default:void 0},class:{default:""},debounceDelay:{default:2e3}},emits:["update:modelValue","onBlur","onChange"],setup(t,{emit:n}){const g=ye,_=t,k=n,w=e(),x=o("w-full min-h-14 h-14 p-4 border border-backgroundContrast focus:ring-2 focus:ring-blue-500 focus:outline-none bg-background text-primaryWeekColor resize-none overflow-hidden",_[g(341)]),I=s(_["modelValue"]),S=s(_[g(333)]),M=s(null),C=e=>{const t=g,n=e?.[t(334)]||M["value"];n instanceof HTMLTextAreaElement&&(n[t(320)][t(315)]()===""?n[t(317)][t(351)]="":n[t(317)][t(351)]=n[t(323)]+"px")},D=a.debounce((e=>{const t=g;k("onChange",e),S[t(320)]=e}),_[g(342)]),T=()=>{const e=g;I[e(320)]!==S[e(320)]&&(D(I[e(320)]),k("update:modelValue",I[e(320)])),k("onBlur",I[e(320)])};return i((()=>{r((()=>{const e=ye;M[e(320)]&&C()}))})),l((()=>{const e=g;D[e(336)]?.()})),c((()=>_[g(333)]),(e=>{const t=g;I[t(320)]=e,S[t(320)]=e})),(e,n)=>{const o=g;return h(),u("div",null,[d(f("textarea",{ref_key:"textarea",ref:M,"onUpdate:modelValue":n[0]||(n[0]=e=>I[o(320)]=e),placeholder:y(w)[o(337)],class:v(y(x)),maxlength:t[o(319)],onInput:C,onBlur:T},null,42,ke),[[m,I[o(320)]]]),t[o(319)]?(h(),u("div",{key:0,class:v(["text-right text-xs",I[o(320)][o(324)]/t[o(319)]>=.9?"text-red-500":"text-primaryWeekColor"])},b(I[o(320)][o(324)])+"/"+b(t[o(319)]),3)):p("",!![])])}}});(function(e,t){const n=dt,o=e();while(!![])try{const e=parseInt(n(514))/1*(parseInt(n(479))/2)+parseInt(n(494))/3*(-parseInt(n(507))/4)+-parseInt(n(595))/5*(parseInt(n(498))/6)+parseInt(n(596))/7+parseInt(n(535))/8+-parseInt(n(504))/9*(parseInt(n(477))/10)+parseInt(n(531))/11;if(e===t)break;else o["push"](o["shift"]())}catch(s){o["push"](o["shift"]())}})(pt,538706);const Ie=function(){let e=!![];return function(t,n){const o=e?function(){const e=dt;if(n){const o=n[e(523)](t,arguments);return n=null,o}}:function(){};return e=![],o}}(),Se=Ie(void 0,(function(){const e=dt;return Se["toString"]()[e(552)](e(591))[e(546)]()["constructor"](Se)[e(552)](e(591))}));Se();const Me=function(){let e=!![];return function(t,n){const o=e?function(){const e=dt;if(n){const o=n[e(523)](t,arguments);return n=null,o}}:function(){};return e=![],o}}(),Ce=Me(void 0,(function(){const e=dt,t=function(){const e=dt;let t;try{t=Function("return (function() "+e(489)+");")()}catch(n){t=window}return t},n=t(),o=n[e(478)]=n["console"]||{},s=[e(480),"warn",e(529),e(488),e(527),e(487),e(580)];for(let a=0;a<s["length"];a++){const t=Me["constructor"]["prototype"][e(501)](Me),n=s[a],i=o[n]||t;t[e(533)]=Me["bind"](Me),t[e(546)]=i[e(546)][e(501)](i),o[n]=t}}));Ce();const De={key:1,class:"h-full flex flex-col items-center justify-center"},Te={class:"text-2xl font-medium text-fontPassive mb-4"},Be={key:2,class:"message-display-body"},Ae={key:0,class:"message-body-container message-title-container"},Le={key:0,class:"message-title w-full ml-1"},je={key:1,class:"message-title w-full ml-1 font-semibold text-fontPassive"},Ve={class:"message-body-container message-metadata-container"},Ee={key:0,class:"metadata-element priority"},Pe={class:"metadata-value"},ze={class:"pl-2"},Re={class:"metadata-element due-to"},Ne={class:"metadata-value"},He={key:0,class:"due-date-label font-semibold"},Ue={key:1,class:"font-semibold text-fontPassive"},qe={key:1,class:"metadata-element modified"},We={class:"metadata-value"},Fe={class:"metadata-element created"},Ke={class:"metadata-value"},Oe={class:"metadata-element id"},Je={class:"metadata-value"},Ye={class:"message-body-container"},Ge={class:"message-body print:border-hidden"},Qe=["innerHTML"],Ze={key:1,class:"box-border p-6 font-semibold text-fontPassive"},$e={key:2,class:"attachment-container min-w-120"},Xe={key:3},et={key:4,class:"border-b-2 border-b-backgroundContrast pb-2 pt-2"},tt={class:"people-container"},nt={key:5,class:"people-list-container"},ot={class:"flex flex-col space-y-2"},st={key:6,class:"attachment-container"},at={key:7,class:"people-list-container"},it={class:"flex items-center text-xs"},rt={key:0,class:"text-fontPassive pl-1"},lt={key:0},ct={key:8,class:"message-html h-full box-border pt-4 pr-1 pl-1"},ut={key:1,class:"footer-container print:hidden"};function dt(e,t){const n=pt();return dt=function(e,t){e-=472;let o=n[e];return o},dt(e,t)}function pt(){const e=["title","none","filter","subLabel","node","count","iAmAuthor","sort","trace","doneAt","resolve","style","recipientCounts","find","tag","modified","excel/","dtDue","role","(((.+)+)+)+$","openDeleteLesson","noTodoSelected","-skeleton-","115UhsnMv","7350749Ewjpgv","priorityTodo","deleted","position","doMessageIt","recipientSingular","10gTKtMQ","console","84YnJrLY","log","iconSet","handleCompleted","date","authorSingular","mutates","closable","table","error",'{}.constructor("return this")( )',"fetchAll","recipientPlural","messageManager","isSame","490641PpIzmM","Author","callback","isInParentView","107868uIrYqc","/messages/","recurrenceSettings","bind","body","fontSize","9267444rRIynB","setProperty","replace","24MVWqwB","givenMessage",".xlsx","identifier","lastContentChange","priority","floor","17146bwacnf","outdatedVersion","setSelectedTodoIRI","label","getTime","completedWhen","notes","dateTimeDisplay","noDateGiven","apply","noTitle","toValidDate","ToDo","exception","archivedWhen","info","successfullyPersistedNotes","7446472AedQLC","messageNotFoundError","__proto__","iAmOwner","4128056WaggJk","random","couldNotDeleteElement","visible","person","lineBreak","isAdminOrHigher","doDelete","setSelectedMessageId","update","isAbsent","toString","created","map","seenWhen","dateIsEmpty","Rcpt","search","messageId","length","_id","unarchive","showSurveyResultsLabel","value","doEdit","isBefore","couldNotPersistNotes","includes","loading","push","authorPlural","icon","dueTo","showSurveyResultsSubLabel","form","unarchiveShort","variant"];pt=function(){return e};return pt()}const mt=n({__name:"ToDoDetail",props:{messageId:{default:-1},givenMessage:{default:void 0},openExternal:{type:Boolean,default:![]},variant:{default:"standalone"},closable:{type:Boolean,default:![]}},emits:["refetch","close","footer-actions"],setup(t,{emit:n}){const o=dt,a=g(),r=oe(),l=C(),m=e(),J=x(),ce=re(),ue=_(),de=s(void 0),pe=s([]),me=n,fe=t,ye=e=>{const t=dt;return{identifier:e[t(510)],label:e["label"],icon:e[t(566)],subLabel:e[t(575)],iconSet:e[t(481)],fontSize:e[t(503)],lineBreak:e[t(540)],mode:"square",title:e["title"],clicked:()=>Et(e)}};i((()=>{const e=dt;fe["givenMessage"]===void 0?he(fe[e(553)]):(Bt(),Pt(),ge())}));const be=s(![]);k((()=>{r["setSelectedMessageId"](-1)}));async function he(e){const t=dt;if(e<=0)return;be[t(558)]=!![],await ce["fetch"]({id:t(499)+e,queryKey:"detail",onDone:e=>{const n=t;if(!e)return w(m[n(532)]);_e[n(558)]=e,Bt(),Pt(),ge()}}),be[t(558)]=![]}function ge(){const e=dt;de["value"]=_e[e(558)]?new Z({appointment:_e["value"],route:J,locale:m,applicationStore:a,appointmentDefaultCollectionHandler:ue}):void 0,pe[e(558)]=wt[e(558)][e(574)]((t=>{const n=e;if(t[n(538)]===void 0)return!![];if(typeof t["visible"]==="boolean")return t["visible"];return t[n(538)]()}));if(fe[e(571)]==="drawer"){const t=pe[e(558)][e(548)](ye)||[];me("footer-actions",t)}}const _e=s(fe["givenMessage"]??void 0),ke=s(0),we=s(0),Ie=s(![]),Se=s(null),Me=s(null),Ce=I(),pt=s(null),mt=s({errorMessage:"",loading:![]}),ft=S((()=>{const e=dt;if(!_e[e(558)])return![];return _e[e(558)]["iCanEdit"]??![]})),vt=S((()=>{const e=dt;return!M["date"][e(550)](_e[e(558)]?.[e(473)])})),yt=()=>{Ce["setSelectedTodoIRI"](null),me("close")},bt=async()=>{const e=dt;if(!_e["value"])return;ce["create"]({params:{cloneFrom:_e["value"]["id"],shownIn:R[e(526)]},mutationKey:"messageClone",onDone:t=>{const n=e;if(t===void 0){N("Could not create copy.");return}l["push"]({name:"t.edit",params:{id:t["id"][n(506)]("/messages/","")},query:{}})}})},ht=async()=>{const e=dt;await ce[e(482)](_e[e(558)],_e[e(558)]?.["me"]?.["id"],!![],Ct)},gt=async()=>{const e=dt;await ce[e(482)](_e[e(558)],_e[e(558)]?.["me"]?.["id"],![],Ct)},_t=async()=>{const e=dt,t=_e[e(558)]?.["id"];if(!t)return;ce["update"]({id:t,params:{operation:![]},mutationKey:"delete",onDone:e=>{if(!e)return;H(ie(_e["value"],"undelete")),Ct()}})},kt=async()=>{const e=dt,t=_e[e(558)]?.["id"];if(!t){N(m["couldNotDeleteElement"]);return}if(_e["value"]?.["predecessor"]){de[e(558)]?.[e(592)](t);return}ce["update"]({id:t,params:{operation:!![]},mutationKey:"delete",onDone:t=>{const n=e;if(!t){N(m[n(537)]);return}H(ie(_e[n(558)],"delete")),Ct()}})},wt=s([{identifier:"toMessageIt",iconSet:"isy",icon:"isy isy_message",label:m[o(475)],callback:Dt,visible:()=>![]},{identifier:"toAgendaIt",iconSet:"isy",icon:"isy isy_to_appointment",label:m["doToAgenda"],callback:Tt,visible:()=>![]},{identifier:"edit",accentuate:!![],iconSet:"isy",icon:"isy isy_edit",label:m[o(559)],callback:()=>{const e=o;Ce[e(516)](null),l[e(564)]({name:"t.edit",params:{id:_e[e(558)]?.["_id"][e(546)]()}})},visible:()=>{const e=o;return _e[e(558)]?.[e(578)]===!![]||_e[e(558)]?.[e(534)]===!![]}},{identifier:"downloadSurveyResults",label:m[o(557)],subLabel:m[o(568)],icon:"ballot",iconSet:"material",callback:Lt,visible:()=>{const e=o;return _e["value"]&&(_e[e(558)]?.[e(569)]?.["id"]||_e[e(558)]?.["body"]?.[e(562)]("<form"))&&(ft[e(558)]||a[e(541)])},loading:mt[o(558)][o(563)]},{identifier:"showSurveyResults",label:m[o(557)],subLabel:"alpha",icon:"ballot",iconSet:"material",callback:()=>{const e=o;Ce[e(516)](null),l[e(564)]({name:"t.survey-results",params:{id:_e[e(558)]?_e["value"][e(555)]:"no-id"}})},visible:()=>{const e=o;return _e["value"]&&(_e[e(558)]["form"]?.["id"]||_e[e(558)][e(502)]?.[e(562)]("<form"))&&(ft[e(558)]||a[e(541)])},loading:mt[o(558)][o(563)]},{identifier:"delete",iconSet:"isy",icon:"isy isy_bin",label:m[o(542)],mutates:!![],callback:kt,visible:()=>{const e=o;return ft[e(558)]&&!vt[e(558)]}},{identifier:"copy",label:m["doCopy"],icon:"copy_all",iconSet:"material",fontSize:"1rem",callback:bt,lineBreak:!![],visible:()=>{const e=o;return ft[e(558)]}},{identifier:"archive",label:m["archiveShort"],title:m["archive"],icon:"check_circle",iconSet:"material",fontSize:"1rem",mutates:!![],callback:ht,lineBreak:!![],visible:()=>{const e=o;return M[e(483)]["dateIsEmpty"](_e[e(558)]?.["me"]?.[e(519)])}},{identifier:"unarchive",label:m[o(570)],title:m[o(556)],icon:"radio_button_unchecked",iconSet:"material",fontSize:"1rem",mutates:!![],callback:gt,lineBreak:!![],visible:()=>{const e=o;return!M[e(483)]["dateIsEmpty"](_e[e(558)]?.["me"]?.["completedWhen"])}},{identifier:"undelete",label:m["restoreShort"],icon:"undo",iconSet:"material",fontSize:"1rem",mutates:![],callback:_t,lineBreak:!![],visible:()=>{const e=o;return ft[e(558)]&&vt["value"]}}]),xt=S((()=>{const e=o,t=M[e(483)][e(525)](_e[e(558)]?.[e(587)],null),n=M[e(483)][e(525)](_e["value"]?.[e(547)],null),s=M[e(483)][e(525)](_e[e(558)]?.["me"]?.["modified"],null),a=M["date"][e(525)](_e[e(558)]?.["me"]?.["created"],null),i=t&&!M["date"]["isSame"](t,n)?t[e(518)]():0,r=s&&!M["date"][e(493)](s,a)?s[e(518)]():0,l=Math["max"](i,r);return l===0?null:new Date(l)})),It=S((()=>{const e=o;if(_e["value"]===void 0)return"";if(_e[e(558)]?.[e(502)]?.[e(562)]("<form"))return"";return _e[e(558)][e(502)]})),St=S((()=>{const e=o;if(_e[e(558)]===void 0)return[];return D[e(492)]["getAttachments"](_e[e(558)])[e(579)](((t,n)=>{const o=e;return(t[o(474)]??0)-(n[o(474)]??0)}))})),Mt=S((()=>{const e=o;if(_e[e(558)]==void 0)return[];return _e[e(558)]["messageTags"]?.["edges"]?.["map"]((t=>t?.[e(576)]?.[e(586)]))[e(574)](Boolean)??[]}));function Ct(){const e=o;Ce[e(516)](_e["value"]?.["id"]??null),fe[e(553)]&&he(fe[e(553)])}function Dt(){if(window["console"]&&console["log"])console["log"]("add to messages...")}function Tt(){const e=o;if(window[e(478)]&&console[e(480)])console[e(480)]("add to agenda...")}function Bt(){const e=o;pt["value"]?.[e(583)][e(505)]("--due-color",se(_e[e(558)]))}const At=S((()=>{const e=o;return _e["value"]?.[e(500)]?Q(_e[e(558)]?.[e(500)]):{is_rec:![],rec_type:1}}));async function Lt(){const e=o,t="message-survey-results",n=_e[e(558)]?.[e(555)],s=e(588)+t+"/"+n;await T(s,"blob","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",t+"-"+n+e(509),mt["value"])}async function jt(){const e=o;if(_e[e(558)]===void 0)return[];return await ce[e(490)]({queryKey:"recipientByRole",params:{id:_e["value"]?.["id"],role:K[e(495)]}})||[]}async function Vt(){const e=o;if(_e[e(558)]===void 0)return[];return await ce[e(490)]({queryKey:"recipientByRole",params:{id:_e["value"]?.["id"],role:K["Rcpt"]}})||[]}async function Et(e){const t=o;if(e[t(496)]===void 0)return;await e[t(496)]();e[t(485)]&&me("refetch");const n=fe[t(508)]?.[t(555)]||fe["messageId"];if(fe[t(508)]!==void 0||n===void 0)return;he(n);return}function Pt(){const e=o;if(_e[e(558)]===void 0)return;we[e(558)]=_e[e(558)]["recipientCounts"]?.["find"]((t=>t?.[e(590)]===B[e(551)]))?.[e(577)]??0,ke[e(558)]=_e["value"][e(584)]?.[e(585)]((t=>t?.["role"]===B[e(495)]))?.[e(577)]??0,Ie[e(558)]=![],Me[e(558)]=null}async function zt(e){const t=o;Se[t(558)]=null,Me["value"]===e?Ie[t(558)]=!Ie[t(558)]:(Me[t(558)]=e,Ie[t(558)]=!![]),Se[t(558)]=await Rt(e)}async function Rt(e){const t=o;switch(e){case"author":return await jt();case"recipient":return await Vt()}return Promise[t(582)]([])}const Nt=async()=>{const e=o;if(_e[e(558)]===void 0||_e[e(558)]["me"]===void 0)return;const t={id:_e["value"]["me"]?.["id"]??"",notes:_e["value"]["me"]?.["notes"]??""};ce[e(544)]({id:_e[e(558)]["me"]?.["id"]??"",params:t,mutationKey:"setNotes",onDone:t=>{const n=e;t?O(m[n(530)]):N(m[n(561)])}})},Ht=S((()=>{const e=o;if(_e[e(558)]===void 0)return"";return _e[e(558)]["calculatedExtendedTitle"]||_e["value"]["calculatedTitle"]||_e[e(558)][e(572)]||""})),Ut=["w-[8rem]","w-[10rem]","w-[12rem]","w-[14rem]","w-[16rem]","w-[18rem]","w-[20rem]"],qt=S((()=>{const e=o;switch(Me[e(558)]){case"author":return ke[e(558)];case"recipient":return we[e(558)];default:return 0}}));return c((()=>fe[o(553)]),((e,t)=>{const n=o;Ie[n(558)]=![],Me[n(558)]=null;t!==void 0&&r[n(543)](e);if(e<0){_e[n(558)]=void 0;return}he(e)})),c((()=>fe["givenMessage"]),(e=>{const t=o;_e[t(558)]=e??void 0,Bt(),Pt(),ge()})),(e,n)=>{const s=o,i=E("font-awesome-icon"),r=j("tippy");return h(),u("div",{ref_key:"todoDetailElement",ref:pt,class:v(["message-display",{"w-full":t[s(571)]==="drawer"}])},[be["value"]?(h(),A(L,{key:0,mod:"center"})):_e[s(558)]===void 0||_e[s(558)]===null&&!be[s(558)]?(h(),u("div",De,[f("p",Te,b(y(m)[s(593)]),1)])):(h(),u("div",Be,[fe[s(571)]!=="drawer"?(h(),u("div",Ae,[Ht[s(558)][s(554)]>0?(h(),u("span",Le,b(Ht[s(558)]),1)):(h(),u("span",je,b(y(m)[s(524)]),1)),t[s(486)]?(h(),u("i",{key:2,class:"isy isy_close flex justify-end text-3xl cursor-pointer print:hidden",onClick:yt})):p("",!![])])):p("",!![]),f("div",Ve,[_e["value"]["me"]?(h(),u("div",Ee,[d(V(i,{icon:"exclamation",class:"metadata-icon w-8 focus:outline-none cursor-help"},null,512),[[r,{content:""+y(m)[s(512)],placement:"top"}]]),f("div",Pe,[f("span",null,[V(Y,{priority:_e["value"]["me"][s(472)]},null,8,["priority"])]),f("span",ze,b(y(ve)(_e["value"]["me"][s(472)])),1)])])):p("",!![]),f("div",Re,[d(V(i,{icon:"clock",class:"metadata-icon w-8 focus:outline-none cursor-help"},null,512),[[r,{content:""+y(ae)(_e[s(558)],y(m)[s(567)]),placement:"top"}]]),f("div",Ne,[_e[s(558)][s(589)]?(h(),u("span",He,b(y(M)[s(483)][s(521)](_e["value"][s(589)])),1)):(h(),u("span",Ue,b(y(m)[s(522)]),1)),At[s(558)]["is_rec"]?(h(),A(i,{key:2,icon:"rotate-right",class:"text-lg pl-1 focus:outline-none"})):p("",!![])])]),xt[s(558)]?(h(),u("div",qe,[d(V(i,{icon:"pencil",class:"metadata-icon w-8 focus:outline-none cursor-help"},null,512),[[r,{content:""+y(m)["modified"],placement:"top"}]]),f("div",We,[f("span",null,b(y(M)[s(483)][s(521)](xt[s(558)],!![])),1)])])):p("",!![]),f("div",Fe,[d(V(i,{icon:"plus",class:"metadata-icon w-8 focus:outline-none cursor-help"},null,512),[[r,{content:""+y(m)[s(547)],placement:"top"}]]),f("div",Ke,[f("span",null,b(y(M)[s(483)][s(521)](_e[s(558)][s(547)],!![])),1)])]),f("div",Oe,[d(V(i,{icon:"fa-fingerprint",class:"metadata-icon w-8 focus:outline-none cursor-help"},null,512),[[r,{content:""+y(m)["id"],placement:"top"}]]),f("div",Je,[f("span",null,b(_e[s(558)][s(555)]),1)])])]),f("div",Ye,[f("div",Ge,[(It["value"]??"")[s(554)]>0?(h(),u("div",{key:0,class:"message-html overflow-auto h-full box-border p-6",innerHTML:It[s(558)]},null,8,Qe)):_e["value"]&&!_e[s(558)][s(569)]&&!_e[s(558)]["body"]?.[s(562)]("<form")?(h(),u("p",Ze,b(y(m)["noContent"]),1)):p("",!![]),V($,{message:_e[s(558)]},null,8,["message"]),St["value"][s(554)]>0?(h(),u("div",$e,[(h(!![]),u(P,null,z(St["value"],((e,t)=>(h(),A(X,{key:t,attachment:e},null,8,["attachment"])))),128))])):p("",!![]),_e["value"]&&(_e[s(558)][s(569)]||_e[s(558)][s(502)]?.[s(562)]("<form"))?(h(),u("div",Xe,[V(G,{message:_e["value"]},null,8,["message"])])):p("",!![]),Mt["value"][s(554)]?(h(),u("div",et,[V(ee,{tags:Mt["value"],scope:"todo"},null,8,["tags"])])):p("",!![]),f("div",tt,[ke[s(558)]>0?(h(),A(ne,{key:0,text:ke[s(558)]+" "+(ke[s(558)]>1?y(m)[s(565)]:y(m)[s(484)]),active:Me["value"]==="author",onClicked:n[0]||(n[0]=e=>zt("author"))},null,8,["text","active"])):p("",!![]),we[s(558)]>0&&!y(a)[s(497)]?(h(),A(ne,{key:1,text:we[s(558)]+" "+(we[s(558)]>1?y(m)[s(491)]:y(m)[s(476)]),active:Me[s(558)]==="recipient",onClicked:n[1]||(n[1]=e=>zt("recipient"))},null,8,["text","active"])):p("",!![])]),Ie[s(558)]&&Se[s(558)]===null?(h(),u("div",nt,[f("div",ot,[(h(!![]),u(P,null,z(qt["value"],(e=>{const t=s;return h(),A(le,{key:Me[t(558)]+t(594)+e,class:v(["h-[1.1rem]",Ut[Math[t(513)](Math[t(536)]()*Ut[t(554)])]])},null,8,["class"])})),128))])])):Ie[s(558)]&&Se[s(558)]!==null&&Se["value"]?.["length"]===0?(h(),u("div",st,b(y(m)[s(573)]),1)):Ie[s(558)]&&Se[s(558)]!==null&&Se[s(558)]?.[s(554)]>0?(h(),u("ul",at,[(h(!![]),u(P,null,z(Se[s(558)],(e=>{const t=s;return h(),u("li",{key:e[t(555)],class:"people-list-element"},[V(te,{class:v(["hover:underline cursor-pointer",{"line-through":e[t(545)]}]),person:e[t(539)],onClick:n=>y(l)[t(564)]({name:"people.detail",params:{personId:e["person"]["_id"]}}),lastnameFirst:!![]},{after:U((()=>[f("div",it,[e[t(528)]&&_e[t(558)][t(578)]?(h(),u("span",rt,[q(" - "+b(y(m)[t(581)])+": "+b(y(M)[t(483)]["dateTimeDisplay"](e[t(528)]))+" ",1),y(W)(e[t(549)])[t(560)](y(W)(_e["value"][t(511)]))?(h(),u("span",lt,"("+b(y(m)[t(515)])+")",1)):p("",!![])])):p("",!![])])])),_:2},1032,["class","person","onClick"])])})),128))])):p("",!![]),_e[s(558)]["me"]?(h(),u("div",ct,[V(xe,{modelValue:_e[s(558)]["me"][s(520)]??"",placeholder:y(m)["notes"],maxLength:200,onOnChange:Nt,"onUpdate:modelValue":n[2]||(n[2]=e=>_e[s(558)]["me"][s(520)]=e)},null,8,["modelValue","placeholder"])])):p("",!![])])]),t["variant"]==="standalone"?(h(),u("div",ut,[(h(!![]),u(P,null,z(pe[s(558)],(e=>{const t=s;return h(),A(F,{key:e[t(566)],label:e[t(517)],subLabel:e[t(575)],icon:e[t(566)],iconSet:e[t(481)],fontSize:e[t(503)],mode:"square",onClicked:t=>Et(e)},null,8,["label","subLabel","icon","iconSet","fontSize","onClicked"])})),128))])):p("",!![])]))],2)}}});const ft=J(mt,[["__scopeId","data-v-27fbb07c"]]);export{ft as _,ve as g};
