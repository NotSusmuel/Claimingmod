import{ah as t,ai as n,aJ as e,d as o,a$ as s,r,T as i,c as a,F as c,D as u,b as l,as as f,a as d,J as p,t as h,b0 as v,q as _,O as R,p as g,ak as m,y as b,z as y}from"./index_3.11.0.22--2602021337_b7dc42e999.js";const I=A;(function(t,n){const e=A,o=t();while(!![])try{const t=-parseInt(e(152))/1+-parseInt(e(166))/2+parseInt(e(157))/3*(parseInt(e(171))/4)+-parseInt(e(142))/5+-parseInt(e(150))/6*(-parseInt(e(170))/7)+-parseInt(e(175))/8+-parseInt(e(156))/9*(-parseInt(e(159))/10);if(t===n)break;else o["push"](o["shift"]())}catch(s){o["push"](o["shift"]())}})(M,903098);const w=function(){let t=!![];return function(n,e){const o=t?function(){const t=A;if(e){const o=e[t(147)](n,arguments);return e=null,o}}:function(){};return t=![],o}}(),E=w(void 0,(function(){const t=A;return E[t(167)]()[t(145)](t(154))[t(167)]()[t(155)](E)["search"](t(154))}));E();const S=function(){let t=!![];return function(n,e){const o=t?function(){if(e){const t=e["apply"](n,arguments);return e=null,t}}:function(){};return t=![],o}}(),k=S(void 0,(function(){const t=A,n=function(){const t=A;let n;try{n=Function(t(151)+t(174)+");")()}catch(e){n=window}return n},e=n(),o=e[t(161)]=e[t(161)]||{},s=["log",t(164),"info",t(165),"exception",t(172),t(168)];for(let r=0;r<s["length"];r++){const n=S[t(155)][t(149)]["bind"](S),e=s[r],i=o[e]||n;n["__proto__"]=S[t(153)](S),n[t(167)]=i[t(167)]["bind"](i),o[e]=n}}));k();function A(t,n){const e=M();return A=function(t,n){t-=142;let o=e[t];return o},A(t,n)}function M(){const t=["mutate","handleApolloError","warn","error","980214sEqzlo","toString","trace","GET_MESSAGE_RESOURCE_RESERVATIONS_FOR_ADMIN_MEMBERSHIP","84NsKlVS","2053144EIDRjo","table","query",'{}.constructor("return this")( )',"9567976xeWobo","1521020avkaHd","UPDATE_MESSAGE_RESOURCE","updateMessageResource","search","messageResource","apply","getMessageResourceReservationsForAdminMembership","prototype","334812VIqCOI","return (function() ","240301AsCLUS","bind","(((.+)+)+)+$","constructor","88227wuNqvg","3nrRMre","GET_MESSAGE_RESOURCE_RESERVATIONS","1990pEwsli","catch","console"];M=function(){return t};return M()}class C{async[I(144)](e){const o=I,s=await t[o(162)]()({mutation:n[o(146)][o(143)],variables:{input:e}})["catch"]((n=>{const e=o;t[e(163)](n)}));if(s===void 0)return![];return!![]}async["getMessageResourceReservations"](){const n=I,o=await t[n(173)]()({query:e[n(146)][n(158)],fetchPolicy:"no-cache"})[n(160)]((e=>{const o=n;t[o(163)](e)}));if(o===void 0)return;return o}async[I(148)](){const n=I,o=await t[n(173)]()({query:e[n(146)][n(169)],fetchPolicy:"no-cache"})[n(160)]((e=>{const o=n;t[o(163)](e)}));if(o===void 0)return;return o}}(function(t,n){const e=J,o=t();while(!![])try{const t=-parseInt(e(377))/1+parseInt(e(415))/2*(-parseInt(e(433))/3)+-parseInt(e(412))/4+-parseInt(e(397))/5+-parseInt(e(385))/6*(parseInt(e(380))/7)+-parseInt(e(389))/8+parseInt(e(387))/9;if(t===n)break;else o["push"](o["shift"]())}catch(s){o["push"](o["shift"]())}})(P,805795);const O=function(){let t=!![];return function(n,e){const o=t?function(){if(e){const t=e["apply"](n,arguments);return e=null,t}}:function(){};return t=![],o}}(),F=O(void 0,(function(){const t=J;return F[t(405)]()[t(390)](t(418))["toString"]()[t(378)](F)["search"]("(((.+)+)+)+$")}));F();const T=function(){let t=!![];return function(n,e){const o=t?function(){const t=J;if(e){const o=e[t(410)](n,arguments);return e=null,o}}:function(){};return t=![],o}}(),q=T(void 0,(function(){const t=J;let n;try{const e=Function("return (function() "+t(414)+");");n=e()}catch(s){n=window}const e=n[t(428)]=n["console"]||{},o=[t(409),"warn",t(386),t(424),t(421),t(395),t(382)];for(let r=0;r<o["length"];r++){const n=T[t(378)][t(417)][t(383)](T),s=o[r],i=e[s]||n;n[t(402)]=T[t(383)](T),n[t(405)]=i[t(405)][t(383)](i),e[s]=n}}));q();const N={class:"notificationlist"},G=["onClick"],j={class:"notification__title"},x={key:0,class:"notification__body"},z={key:1,class:"notification__actions"},D=["disabled","onClick"];function P(){const t=["endOf","prototype","(((.+)+)+)+$","format","messageResources","exception"," • ","all","error","primaryAuthor","reservationNotifications","clone","console","loginid","agendaResourceTitle","node","Booked","780369MTeEjE","updateMessageResource","resource","717625wIkxjJ","constructor","options","1149267bJCDJC","action","trace","bind","auth","48Yedjuh","info","49559229mbnGNm","startOf","343344ZMlwRQ","search","calendar","dateTimeDisplay","dtFrom","defaultRouteFormat","table","close","7929515OhBEgC","message","person","getMessageResourceReservationsForAdminMembership","value","__proto__","push","tag","toString","date","actions","data","log","apply","title","1042092zjSKKP","body",'{}.constructor("return this")( )',"6RzGviq"];P=function(){return t};return P()}function J(t,n){const e=P();return J=function(t,n){t-=377;let o=e[t];return o},J(t,n)}const U=o({__name:"NotificationList",setup(t){const n=J,e=g(),o=s(),y=m(),I=r(void 0),w=async(t,n)=>{const o=J;I[o(401)]=t[o(379)][o(404)];if(n[o(381)]==="accept-reservation"){const n=await(new C)[o(434)]({id:t[o(379)][o(408)]["id"],booked:v[o(432)]});if(!n){_("Fehler beim Akzeptieren der Reservierung"),I[o(401)]=void 0;return}}else if(n[o(381)]==="decline-reservation"){const n=await(new C)["updateMessageResource"]({id:t[o(379)][o(408)]["id"],booked:v["Refused"]});if(!n){_("Fehler beim Ablehnen der Reservierung"),I[o(401)]=void 0;return}}else if(n[o(381)]==="show-reservation"){const n=R(t["options"][o(408)]?.[o(398)]?.[o(393)]);e[o(403)]({name:"rooms.detail",params:{roomId:t[o(379)][o(408)]["resource"]?.["_id"]},query:{detail:t[o(379)][o(408)]?.[o(398)]?.["id"],view:"list",filter:n[o(419)](y[o(391)][o(394)]),start:n[o(427)]()[o(388)]("week")["format"](y[o(391)][o(394)]),end:n[o(427)]()[o(416)]("week")["format"](y[o(391)][o(394)])}}),I["value"]=void 0;return}I[o(401)]=void 0,t[o(396)]()},E=async()=>{const t=J,n=(new C)["getMessageResourceReservations"](),e=(new C)[t(400)](),[s,r]=await Promise[t(423)]([n,e]),i=[...s?.[t(408)]?.["messageResources"]["edges"]??[],...r?.["data"]?.[t(420)]["edges"]??[]];if(i)for(const a of i){if(!a?.["node"]?.["id"]||!a[t(431)][t(398)]?.["id"])continue;o["showNotification"]("Reservationsanfrage von "+a["node"]["message"][t(425)]?.[t(399)]?.[t(429)],{tag:a?.[t(431)]["id"],body:(a?.[t(431)][t(398)]?.[t(430)]??a?.[t(431)][t(398)]?.["id"])+t(422)+(a?.[t(431)][t(435)]?.["descShort"]??"")+" • "+f[t(406)][t(392)](a?.[t(431)]?.[t(398)]?.[t(393)]??""),data:a?.[t(431)],actions:[{action:"accept-reservation",title:"Annehmen"},{action:"decline-reservation",title:"Ablehnen"},{action:"show-reservation",title:"Anzeigen"}]})}};return i()[n(384)][n(399)]["hasResourcesToAdminister"]&&E(),(t,e)=>{const s=n;return b(),a("div",N,[(b(!![]),a(c,null,u(l(o)[s(426)],(t=>{const n=s;return b(),a("div",{key:t["title"],class:"notificationlist__item notification"},[d("button",{class:"notification__close",onClick:e=>t[n(396)]()},[...e[0]||(e[0]=[d("i",{class:"fas fa-close"},null,-1)])],8,G),d("div",j,h(t[n(411)]),1),t?.[n(379)]?.[n(413)]?(b(),a("div",x,h(t["options"][n(413)]),1)):p("",!![]),t?.["options"]?.[n(407)]?(b(),a("div",z,[(b(!![]),a(c,null,u(t?.[n(379)]?.[n(407)],(e=>{const o=n;return b(),a("button",{key:e["action"],class:"notification__action",disabled:I[o(401)]===t[o(379)][o(404)],onClick:n=>w(t,e)},h(e["title"]),9,D)})),128))])):p("",!![])])})),128))])}}});const V=y(U,[["__scopeId","data-v-29b9e086"]]);export{V as _};
