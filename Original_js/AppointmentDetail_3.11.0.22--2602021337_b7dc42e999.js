import{_ as e,A as t}from"./AppointmentMySurveyResult_3.11.0.22--2602021337_b7dc42e999.js";import{cx as n,u as s,cG as r,bq as a,b0 as o,d as i,c,F as l,D as u,H as d,y as f,T as p,cu as m,r as v,U as g,aO as h,aQ as y,au as b,cy as _,A as k,G as w,L as I,a as x,t as C,b as R,J as S,e as M,as as A,w as P,g as O,S as T,B as j,k as N,cY as B,n as F,cZ as q,W as L,X as z,h as H,p as Y,q as K,z as Z}from"./index_3.11.0.22--2602021337_b7dc42e999.js";import{M as D}from"./MessageApi_3.11.0.22--2602021337_b7dc42e999.js";import{_ as U}from"./MessagePersonButton_3.11.0.22--2602021337_b7dc42e999.js";import{_ as E}from"./MessageViewAttachment.vue_vue_type_script_setup_true_lang_3.11.0.22--2602021337_b7dc42e999.js";import{_ as G}from"./PersonLabel.vue_vue_type_script_setup_true_lang_3.11.0.22--2602021337_b7dc42e999.js";import{g as W}from"./MessageAuthLevel_3.11.0.22--2602021337_b7dc42e999.js";import{useNavigationStore as J}from"./navigation_3.11.0.22--2602021337_b7dc42e999.js";import{_ as X}from"./MessageTags.vue_vue_type_script_setup_true_lang_3.11.0.22--2602021337_b7dc42e999.js";import{_ as $}from"./MessageLeave.vue_vue_type_script_setup_true_lang_3.11.0.22--2602021337_b7dc42e999.js";import{_ as V}from"./MessageMessage.vue_vue_type_script_setup_true_lang_3.11.0.22--2602021337_b7dc42e999.js";import{u as Q}from"./index_3.11.0.22--2602021337_b7dc42e9993.js";import{g as ee,a as te}from"./absence_3.11.0.22--2602021337_b7dc42e999.js";import{_ as ne}from"./Skeleton.vue_vue_type_script_setup_true_lang_3.11.0.22--2602021337_b7dc42e999.js";(function(e,t){const n=ie,s=e();while(!![])try{const e=-parseInt(n(375))/1*(-parseInt(n(371))/2)+parseInt(n(389))/3+-parseInt(n(380))/4*(-parseInt(n(386))/5)+parseInt(n(390))/6+-parseInt(n(358))/7+parseInt(n(391))/8+parseInt(n(373))/9*(-parseInt(n(385))/10);if(e===t)break;else s["push"](s["shift"]())}catch(r){s["push"](s["shift"]())}})(ue,858691);const se=function(){let e=!![];return function(t,n){const s=e?function(){const e=ie;if(n){const s=n[e(377)](t,arguments);return n=null,s}}:function(){};return e=![],s}}(),re=se(void 0,(function(){const e=ie;return re[e(379)]()["search"](e(357))[e(379)]()[e(369)](re)[e(363)](e(357))}));re();const ae=function(){let e=!![];return function(t,n){const s=e?function(){const e=ie;if(n){const s=n[e(377)](t,arguments);return n=null,s}}:function(){};return e=![],s}}(),oe=ae(void 0,(function(){const e=ie,t=function(){let e;try{e=Function('return (function() {}.constructor("return this")( ));')()}catch(t){e=window}return e},n=t(),s=n[e(378)]=n[e(378)]||{},r=[e(359),"warn",e(368),"error",e(381),"table",e(372)];for(let a=0;a<r["length"];a++){const t=ae[e(369)][e(360)][e(367)](ae),n=r[a],o=s[n]||t;t[e(376)]=ae[e(367)](ae),t[e(379)]=o[e(379)][e(367)](o),s[n]=t}}));oe();function ie(e,t){const n=ue();return ie=function(e,t){e-=357;let s=n[e];return s},ie(e,t)}const ce=s(),le=e=>{const t=ie;let s="";if(!e)return s;switch(e[t(364)]){case n[t(366)]:s=ce[t(387)];e[t(384)]&&(s+=" "+ce[t(361)]+" "+ce["workAssignment"]);break;case n[t(362)]:s=ce[t(388)];break;case n[t(382)]:s=ce[t(370)];break;case n["Replaced"]:s=ce[t(374)];break;case n[t(383)]:s=ce[t(365)];break;default:s=e[t(364)];break}return s};function ue(){const e=["Normal","search","accomplished","accomplishedNoParticipant","Cancelled","bind","info","constructor","accomplishedNotYetAcc","2JqzRZA","trace","621kVZjdC","accomplishedReplaced","376692WLGSEs","__proto__","apply","console","toString","3188clGVUw","exception","NotYetAcc","NoParticipant","notAccTask","394390OKfOKO","7170XkLKJT","accomplishedCancelled","accomplishedNormal","3858417jwIZrX","6349122HqgfQe","10755096EGAYyM","(((.+)+)+)+$","11398247VjovBu","log","prototype","with"];ue=function(){return e};return ue()}(function(e,t){const n=ge,s=e();while(!![])try{const e=-parseInt(n(436))/1*(-parseInt(n(429))/2)+parseInt(n(409))/3*(parseInt(n(438))/4)+-parseInt(n(423))/5*(parseInt(n(435))/6)+parseInt(n(417))/7+-parseInt(n(426))/8+parseInt(n(414))/9*(-parseInt(n(440))/10)+-parseInt(n(439))/11*(-parseInt(n(420))/12);if(e===t)break;else s["push"](s["shift"]())}catch(r){s["push"](s["shift"]())}})(he,340479);const de=function(){let e=!![];return function(t,n){const s=e?function(){if(n){const e=n["apply"](t,arguments);return n=null,e}}:function(){};return e=![],s}}(),fe=de(void 0,(function(){const e=ge;return fe[e(418)]()[e(416)](e(446))[e(418)]()[e(419)](fe)[e(416)]("(((.+)+)+)+$")}));fe();const pe=function(){let e=!![];return function(t,n){const s=e?function(){if(n){const e=n["apply"](t,arguments);return n=null,e}}:function(){};return e=![],s}}(),me=pe(void 0,(function(){const e=ge;let t;try{const n=Function(e(448)+e(421)+");");t=n()}catch(r){t=window}const n=t[e(433)]=t[e(433)]||{},s=[e(432),e(431),e(449),e(430),"exception",e(415),e(453)];for(let a=0;a<s[e(451)];a++){const t=pe["constructor"][e(447)][e(424)](pe),r=s[a],o=n[r]||t;t[e(443)]=pe[e(424)](pe),t[e(418)]=o[e(418)][e(424)](o),n[r]=t}}));me();const ve=s();function ge(e,t){const n=he();return ge=function(e,t){e-=409;let s=n[e];return s},ge(e,t)}function he(){const e=["statusRejected","2678416pzgJBp","statusNone","None","7646bVpsgZ","error","warn","log","console","Withdrawn","2118JZSYUG","12YizWrO","Submitted","8rupHsf","3311fNZYij","10vKZfIF","statusTaken","Published","__proto__","statusSubmitted","Approved","(((.+)+)+)+$","prototype","return (function() ","info","statusDraft","length","Rejected","trace","426039CRxfAz","RequiresClarification","Draft","statusPublished","Taken","5152419OxZbgD","table","search","4028878yNObld","toString","constructor","22668FTmdnt",'{}.constructor("return this")( )',"statusWithdrawn","3205yzzZIB","bind"];he=function(){return e};return he()}const ye=e=>{const t=ge;switch(e){case r["Draft"]:return ve[t(450)];case r[t(428)]:return ve["statusNone"];case r[t(442)]:return ve[t(412)];case r[t(434)]:return ve[t(422)];default:return e}};const be=e=>{const t=ge;switch(e){case a[t(445)]:return ve["statusApproved"];case a[t(411)]:return ve[t(450)];case a[t(428)]:return ve[t(427)];case a[t(452)]:return ve[t(425)];case a[t(410)]:return ve["statusRequiresClarification"];case a[t(437)]:return ve[t(444)];case a["UnderReview"]:return ve["statusUnderReview"];case a[t(434)]:return ve[t(422)];case a[t(413)]:return ve[t(441)];default:return e}};(function(e,t){const n=Ce,s=e();while(!![])try{const e=parseInt(n(471))/1*(-parseInt(n(462))/2)+-parseInt(n(489))/3+-parseInt(n(487))/4+-parseInt(n(461))/5+-parseInt(n(477))/6*(parseInt(n(474))/7)+-parseInt(n(468))/8+parseInt(n(463))/9*(parseInt(n(486))/10);if(e===t)break;else s["push"](s["shift"]())}catch(r){s["push"](s["shift"]())}})(xe,459113);const _e=function(){let e=!![];return function(t,n){const s=e?function(){const e=Ce;if(n){const s=n[e(481)](t,arguments);return n=null,s}}:function(){};return e=![],s}}(),ke=_e(void 0,(function(){const e=Ce;return ke[e(476)]()["search"](e(466))["toString"]()[e(467)](ke)[e(482)](e(466))}));ke();const we=function(){let e=!![];return function(t,n){const s=e?function(){const e=Ce;if(n){const s=n[e(481)](t,arguments);return n=null,s}}:function(){};return e=![],s}}(),Ie=we(void 0,(function(){const e=Ce,t=function(){const e=Ce;let t;try{t=Function(e(480)+e(493)+");")()}catch(n){t=window}return t},n=t(),s=n[e(492)]=n[e(492)]||{},r=[e(465),e(491),e(464),e(469),e(485),e(470),e(490)];for(let a=0;a<r["length"];a++){const t=we[e(467)]["prototype"]["bind"](we),n=r[a],o=s[n]||t;t["__proto__"]=we["bind"](we),t[e(476)]=o[e(476)][e(478)](o),s[n]=t}}));Ie();function xe(){const e=["3606759HNYqqd","info","log","(((.+)+)+)+$","constructor","1991552FAnPdh","error","table","1LVLvQq","bookedConfirmed","bookedReserved","4627hWhONp","None","toString","2922OPHxPd","bind","Reserved","return (function() ","apply","search","bookedNone","Refused","exception","70tgKPar","393768AsThSt","bookedRefused","2736306xhsXKu","trace","warn","console",'{}.constructor("return this")( )',"826830QquSSs","1198766pCJcIW"];xe=function(){return e};return xe()}function Ce(e,t){const n=xe();return Ce=function(e,t){e-=461;let s=n[e];return s},Ce(e,t)}const Re=s();const Se=e=>{const t=Ce;switch(e){case o["Booked"]:return Re[t(472)];case o["Refused"]:return Re[t(488)];case o[t(479)]:return Re[t(473)];case o[t(475)]:return Re[t(483)];default:return e}};const Me=e=>{const t=Ce;switch(e){case o["Booked"]:return"check_small";case o[t(484)]:return"block";case o["Reserved"]:return"pending";case o["None"]:return"no_meeting_room";default:return"question_mark"}};(function(e,t){const n=Te,s=e();while(!![])try{const e=parseInt(n(341))/1*(parseInt(n(344))/2)+-parseInt(n(352))/3*(-parseInt(n(336))/4)+-parseInt(n(355))/5+-parseInt(n(348))/6+parseInt(n(330))/7*(-parseInt(n(346))/8)+parseInt(n(354))/9+parseInt(n(337))/10;if(e===t)break;else s["push"](s["shift"]())}catch(r){s["push"](s["shift"]())}})(Ae,918678);function Ae(){const e=["table","trace","length","1lCOdYF","info","console","2154622jBIhvM",'{}.constructor("return this")( )',"10415176UHZbGI","exception","6456918GjObHH","constructor","search","warn","2257269KtnoAE","error","11424042WBSwXz","2443995cWbmis","toString","context","7nuiFYJ","__proto__","log","bind","return (function() ","apply","4cQTgSI","6864550KwRPko"];Ae=function(){return e};return Ae()}const Pe=function(){let e=!![];return function(t,n){const s=e?function(){const e=Te;if(n){const s=n[e(335)](t,arguments);return n=null,s}}:function(){};return e=![],s}}(),Oe=Pe(void 0,(function(){const e=Te;return Oe[e(356)]()["search"]("(((.+)+)+)+$")[e(356)]()[e(349)](Oe)[e(350)]("(((.+)+)+)+$")}));Oe();function Te(e,t){const n=Ae();return Te=function(e,t){e-=330;let s=n[e];return s},Te(e,t)}const je=function(){let e=!![];return function(t,n){const s=e?function(){const e=Te;if(n){const s=n[e(335)](t,arguments);return n=null,s}}:function(){};return e=![],s}}(),Ne=je(void 0,(function(){const e=Te,t=function(){const e=Te;let t;try{t=Function(e(334)+e(345)+");")()}catch(n){t=window}return t},n=t(),s=n["console"]=n[e(343)]||{},r=[e(332),e(351),e(342),e(353),e(347),e(338),e(339)];for(let a=0;a<r[e(340)];a++){const t=je[e(349)]["prototype"][e(333)](je),n=r[a],o=s[n]||t;t[e(331)]=je[e(333)](je),t[e(356)]=o[e(356)][e(333)](o),s[n]=t}}));Ne();const Be={class:"py-2 flex items-start justify-start gap-3 flex-wrap"};const Fe=i({__name:"MessageMessages",props:{messages:{},context:{default:"message"}},setup(e){const t=e;return(e,n)=>(f(),c("div",Be,[(f(!![]),c(l,null,u(t["messages"],(e=>{const n=Te;return f(),d(V,{key:e["id"],message:e,context:t[n(357)]},null,8,["message","context"])})),128))]))}});(function(e,t){const n=Bt,s=e();while(!![])try{const e=parseInt(n(311))/1*(parseInt(n(206))/2)+-parseInt(n(221))/3+parseInt(n(198))/4+-parseInt(n(280))/5*(-parseInt(n(248))/6)+-parseInt(n(269))/7+-parseInt(n(295))/8+-parseInt(n(242))/9*(-parseInt(n(238))/10);if(e===t)break;else s["push"](s["shift"]())}catch(r){s["push"](s["shift"]())}})(ze,501686);const qe=function(){let e=!![];return function(t,n){const s=e?function(){if(n){const e=n["apply"](t,arguments);return n=null,e}}:function(){};return e=![],s}}(),Le=qe(void 0,(function(){const e=Bt;return Le[e(241)]()[e(299)](e(294))["toString"]()[e(219)](Le)[e(299)](e(294))}));Le();function ze(){const e=["auth","messageTags","Others","accomplished","authLevel","map","push","messageId","(((.+)+)+)+$","7258328OcxlFp","Author","edges","bind","search","tag","None","iCanUnRegisterSelf","date","messageNotFoundError","table","predecessorChildren","isInParentView","dateTimeRangeDisplay","person","recipientCounts","211811rYMtWK","absenceRequest","attendeeSingular","getInstance","node","_id","title","dtFrom","successor","fetchRecipientsByRole","resource","identifier","ThemselvesAndOthers","getFilteredActions","Refused","rooms","1023820Jytlvr","__proto__","registerMyselfPlural","description","parse","filter","RegisterCandidate","lineBreak","2SXYHkC","superintendentSingular","$emit","exception","Info","RegisterOthers","value","fetch","presentCount","noContent","getId","-skeleton-","callback","constructor","isAbsent","2119911lqMMFC","Themselves","subLabel","absence","loginid","booked","shiftedMessage","room","Reserved","resources","leave","Rcpt","mutates","descShort","calculatedTitle","dtTo","noTitle","10Xfldyd","isAdminOrHigher","informedPeoplePlural","toString","19134657tlIQoX","iconSet","apply","attendeePlural","NotYetAcc","find","12396rYvUnj","includes","prototype","regMethod","floor","RegisterMyself","primaryAuthor","registrationSettings","absenceStatEligibility","label","length","permissionLevel","recipients","registerOthersPlural","is_reg","predecessor","return (function() ","messageManager","getAttachments","resolve","trace","4432225oCqHuX","role","shiftedMessageChildren","none","body","update","log","/people/","Booked","registerCandidatePlural","givenMessage","375xkhGdZ","count","Normal","variant","fontSize","registerMyselfSingular"];ze=function(){return e};return ze()}const He=function(){let e=!![];return function(t,n){const s=e?function(){const e=Bt;if(n){const s=n[e(244)](t,arguments);return n=null,s}}:function(){};return e=![],s}}(),Ye=He(void 0,(function(){const e=Bt,t=function(){const e=Bt;let t;try{t=Function(e(264)+'{}.constructor("return this")( ));')()}catch(n){t=window}return t},n=t(),s=n["console"]=n["console"]||{},r=[e(275),"warn","info","error",e(209),e(305),e(268)];for(let a=0;a<r[e(258)];a++){const t=He[e(219)][e(250)]["bind"](He),n=r[a],o=s[n]||t;t[e(199)]=He[e(298)](He),t[e(241)]=o[e(241)][e(298)](o),s[n]=t}}));Ye();const Ke={class:"message-display h-full"},Ze={key:1,class:"h-full flex flex-col items-center justify-center"},De={class:"text-2xl font-medium text-fontPassive mb-4"},Ue={key:2,class:"message-container"},Ee={key:0,class:"message-title"},Ge={key:0},We={key:1,class:"font-semibold text-fontPassive"},Je={class:"message-body-container"},Xe={class:"message-body print:border-hidden"},$e={class:"metadata-container"},Ve={class:"author"},Qe={class:"metadata"},et={key:0,class:"font-semibold text-fontPassive"},tt={key:1},nt={class:"authlevel"},st={class:"metadata"},rt={class:"font-semibold text-fontPassive"},at={class:"metadata"},ot={class:"font-semibold text-fontPassive"},it={key:0,class:"font-semibold text-fontPassive"},ct=["title"],lt={key:0,class:"metadata flex-wrap"},ut={key:1,class:"metadata flex-wrap"},dt={class:"flex items-center font-semibold text-fontPassive px-1"},ft={key:0,class:"metadata-container"},pt={class:"metadata"},mt={key:1,class:"metadata-container"},vt={class:"metadata"},gt={class:"author mx-1"},ht={key:2,class:"metadata-container"},yt={class:"metadata"},bt={key:3,class:"metadata-container"},_t={class:"metadata"},kt={class:"author mx-1"},wt={key:4,class:"metadata-container"},It={class:"metadata"},xt={class:"author mx-1"},Ct=["innerHTML"],Rt={key:6,class:"no-body font-semibold text-fontPassive border-b-2 border-b-backgroundContrast"},St={key:7,class:"attachment-container min-w-120"},Mt={key:8,class:"border-b-2 border-b-backgroundContrast"},At={class:"people-container"},Pt={key:9,class:"people-list-container"},Ot={class:"flex flex-col space-y-2"},Tt={key:10,class:"attachment-container"},jt={key:11,class:"people-list-container"},Nt={key:12,class:"print:hidden footer-container"};function Bt(e,t){const n=ze();return Bt=function(e,t){e-=191;let s=n[e];return s},Bt(e,t)}const Ft=i({__name:"AppointmentDetail",props:{messageId:{default:-1},givenMessage:{default:void 0},openExternal:{type:Boolean,default:![]},variant:{default:"standalone"},closable:{type:Boolean,default:![]},person:{default:void 0}},emits:["refetch","close","footer-actions"],setup(r,{emit:a}){const i=Bt,Z=p(),V=J(),se=F(),re=Y(),ae=m(),oe=r,ie=s(),ce=a,ue=v(void 0),de=e=>{const t=Bt;return{identifier:e["identifier"],label:e[t(257)],icon:e["icon"],subLabel:e[t(223)],iconSet:e[t(243)],fontSize:e[t(284)],lineBreak:e[t(205)],mode:"square",title:e[t(317)],clicked:()=>Kt(e)}},fe=v(oe[i(279)]??void 0),pe=v(![]),me=v(0),ve=v(0),ge=v(0),he=v(0),be=v(0),_e=v(0),ke=v(0),we=v(0),Ie=v(![]),xe=v(null),Ce=v(null),Re=W,Ae=v(![]),Pe=v(![]),Oe=g((()=>{const e=i,t=fe[e(212)]?.[e(254)]?.[e(309)];return t?h({person:t,showName:!![]}):""})),Te=g((()=>{const e=i;if(fe[e(212)]===void 0)return[];return y[e(265)][e(266)](fe[e(212)])["sort"](((e,t)=>(e["position"]??0)-(t["position"]??0)))})),je=g((()=>{const e=i,t=oe["givenMessage"]?.[e(255)];if(!t)return!![];const n=JSON[e(202)](t||"{}");return Boolean(n?.[e(262)]??![])}));b((()=>{V["setSelectedMessageId"](-1)}));const Ne=oe[i(309)]?.[i(316)]?i(276)+oe[i(309)][i(316)]:Q("personId")[i(212)]?i(276)+Q("personId")[i(212)]:void 0;async function Be(e){const t=i,n=typeof e==="number"?e:parseInt(e??"",10);let s="/messages/"+n;(isNaN(n)||n<=0)&&(s=void 0);if(!s)return;pe["value"]=!![],await ae[t(213)]({id:s,params:{person:Ne,outputContext:Ne?"personId:"+Ne:null},queryKey:"detail",onDone(e){const n=t;if(!e){N(ie[n(304)]);return}fe[n(212)]=e,qe(),Le()}}),pe["value"]=![]}function qe(){const e=i;if(fe[e(212)]===void 0||fe[e(212)]===null)return;ge["value"]=fe[e(212)][e(310)]?.[e(247)]((t=>t?.[e(270)]===B[e(232)]))?.[e(281)]??0,he[e(212)]=fe[e(212)][e(310)]?.["find"]((t=>t?.[e(270)]===B[e(232)]))?.[e(214)]??0,me[e(212)]=fe[e(212)][e(310)]?.["find"]((t=>t?.[e(270)]===B[e(296)]))?.["count"]??0,ve[e(212)]=fe["value"][e(310)]?.[e(247)]((t=>t?.["role"]===B[e(296)]))?.[e(214)]??0,be[e(212)]=fe[e(212)]["recipientCounts"]?.["find"]((e=>e?.["role"]===B["Info"]))?.[e(281)]??0,_e[e(212)]=fe[e(212)]["recipientCounts"]?.[e(247)]((t=>t?.["role"]===B[e(211)]))?.["count"]??0,ke[e(212)]=fe["value"][e(310)]?.[e(247)]((t=>t?.[e(270)]===B["RegisterMyself"]))?.[e(281)]??0,we[e(212)]=fe[e(212)]["recipientCounts"]?.[e(247)]((t=>t?.[e(270)]===B["RegisterCandidate"]))?.[e(281)]??0,Ie["value"]=![],Ce[e(212)]=null}function Le(){const e=i,n=fe[e(212)]?new t({appointment:fe["value"],route:se,locale:ie,applicationStore:Z,appointmentDefaultCollectionHandler:ae}):void 0;ue[e(212)]=n?n[e(195)]():void 0,Ae["value"]=fe["value"]?.[e(251)]===q[e(222)]||fe[e(212)]?.["regMethod"]===q["ThemselvesAndOthers"],Pe[e(212)]=fe[e(212)]?.[e(251)]===q[e(288)]||fe[e(212)]?.["regMethod"]===q[e(194)];if(oe[e(283)]==="drawer"){const t=ue["value"]?.[e(291)](de)||[];ce("footer-actions",t)}}async function ze(e){const t=i;xe[t(212)]=null,Ce[t(212)]===e?(Ie[t(212)]=!Ie[t(212)],Ce[t(212)]=null):(Ce[t(212)]=e,Ie["value"]=!![]),xe[t(212)]=await He(e)}async function He(e){const t=i;switch(e){case"author":return await Ye();case"inform":return await qt();case"recipient":return await Ft();case"registerOthers":return await Lt();case"registerMyself":return await zt();case"registerCandidate":return await Ht();case"myRegistrations":return await Yt()}return Promise[t(267)]([])}async function Ye(){const e=i;if(fe[e(212)]===void 0)return[];return await(new D)[e(191)](fe[e(212)]["id"],_[e(296)])}async function Ft(){const e=i;if(fe[e(212)]===void 0)return[];return await(new D)[e(191)](fe["value"]["id"],_["Rcpt"])}async function qt(){const e=i;if(fe[e(212)]===void 0)return[];return await(new D)[e(191)](fe[e(212)]["id"],_[e(210)])}async function Lt(){const e=i;if(fe["value"]===void 0)return[];return await(new D)["fetchRecipientsByRole"](fe[e(212)]["id"],_["RegisterOthers"])}async function zt(){const e=i;if(fe[e(212)]===void 0)return[];return await(new D)[e(191)](fe["value"]["id"],_[e(253)])}async function Ht(){const e=i;if(fe[e(212)]===void 0)return[];return await(new D)[e(191)](fe[e(212)]["id"],_[e(204)])}async function Yt(){const e=i;if(fe[e(212)]===void 0||!Z[e(286)][e(309)]?.[e(225)])return[];return await(new D)["fetchRecipientsByRole"](fe[e(212)]["id"],_[e(232)],Z[e(286)][e(309)]?.[e(225)])}async function Kt(e){const t=i;if(e[t(218)]===void 0)return;const n=await e[t(218)]();if(n===![])return;e[t(233)]&&await ce("refetch");qe(),Le();const s=oe[t(279)]?.[t(316)]||oe[t(293)];if(oe[t(279)]!==void 0||s===void 0)return;Be(s);return}async function Zt(e){const t=i;let n;if(Z["auth"]["person"]?.[t(316)]===e["person"][t(316)]){const s={id:e["id"]};n=await ae[t(274)]({id:s["id"],params:s,mutationKey:"unRegisterSelf"})}else{const s={id:e["id"]};n=await ae[t(274)]({id:s["id"],params:s,mutationKey:"unRegisterOthers"})}if(!n)return K("Fehler beim de-registrieren."),![];await ce("refetch"),qe(),Le();const s=oe[t(279)]?.[t(316)]||oe["messageId"];Be(s)}const Dt=g((()=>{const e=i;if(fe[e(212)]===void 0)return[];return fe[e(212)][e(287)]?.[e(297)]?.[e(291)]((t=>t?.[e(315)]?.[e(300)]))[e(203)](Boolean)??[]})),Ut=g((()=>{const e=i;if(fe[e(212)]===void 0)return[];return fe["value"][e(306)]?.["edges"]?.[e(291)]((t=>t?.[e(315)]))[e(203)](Boolean)??[]})),Et=g((()=>{const e=i;if(fe[e(212)]===void 0)return[];return fe[e(212)][e(271)]?.[e(297)]?.[e(291)]((t=>t?.[e(315)]))[e(203)](Boolean)??[]})),Gt=g((()=>{const e=i;if(!Ne)return;const t=(fe[e(212)]?.[e(260)]?.[e(297)]??[])[e(291)]((t=>t?.[e(315)]))[e(203)](Boolean);return t[e(247)]((t=>t[e(309)]["id"]===Ne))})),Wt=g((()=>{const e=i;return Gt[e(212)]&&Gt[e(212)][e(231)]&&fe[e(212)]&&[n[e(282)],n[e(246)]][e(249)](fe[e(212)][e(289)])&&(Gt[e(212)]["person"]["iAmClassTeacher"]||Z[e(239)]||((Gt[e(212)][e(270)]??0)&_[e(232)])>0&&Gt[e(212)][e(309)][e(316)]===k[e(314)]()[e(216)]())}));oe["messageId"]>-1||oe[i(279)]===void 0?Be(oe[i(293)]):(qe(),Le());const Jt=g((()=>{const e=i;if(fe[e(212)]===void 0)return"";return fe[e(212)]["calculatedExtendedTitle"]||fe[e(212)][e(235)]||fe["value"][e(317)]||""})),Xt=["w-[8rem]","w-[10rem]","w-[12rem]","w-[14rem]","w-[16rem]","w-[18rem]","w-[20rem]"],$t=g((()=>{const e=i;switch(Ce[e(212)]){case"author":return me[e(212)];case"recipient":return ge[e(212)];case"inform":return be[e(212)];case"registerOthers":return _e[e(212)];case"registerMyself":return ke[e(212)];case"registerCandidate":return we[e(212)];case"myRegistrations":return 1;default:return 0}}));return w((()=>oe["messageId"]),((e,t)=>{const n=i;Ie[n(212)]=![],Ce[n(212)]=null;t!==void 0&&V["setSelectedMessageId"](e);if(e<0){fe[n(212)]=void 0;return}Be(e)})),w((()=>oe["givenMessage"]),(e=>{fe["value"]=e??void 0,qe(),Le()})),(t,n)=>{const s=i,a=O("router-link"),p=O("font-awesome-icon"),m=z("tippy");return f(),c("div",Ke,[pe[s(212)]?(f(),d(I,{key:0,mod:"center"})):fe[s(212)]===void 0||fe[s(212)]===null&&!pe["value"]?(f(),c("div",Ze,[x("p",De,C(R(ie)["noAppointmentSelected"]),1)])):(f(),c("div",Ue,[r[s(283)]==="standalone"?(f(),c("div",Ee,[Jt[s(212)][s(258)]>0?(f(),c("p",Ge,C(Jt[s(212)]),1)):(f(),c("p",We,C(R(ie)[s(237)]),1)),r["closable"]?(f(),c("div",{key:2,class:"flex items-center",onClick:n[0]||(n[0]=e=>t[s(208)]("close"))},[...n[8]||(n[8]=[x("i",{class:"ml-4 text-lg isy isy_cancel print:hidden"},null,-1)])])):S("",!![])])):S("",!![]),x("div",Je,[x("div",Xe,[x("div",$e,[x("div",Ve,[x("span",null,C(Oe[s(212)]),1)]),x("div",Qe,[x("span",null,C(fe[s(212)][s(316)]),1),n[9]||(n[9]=x("div",{class:"metadata-separator mx-4"},null,-1)),fe[s(212)][s(318)]===null||fe[s(212)][s(236)]===null?(f(),c("span",et,C(R(ie)["noDateGiven"]),1)):(f(),c("span",tt,C(R(A)[s(303)][s(308)](fe[s(212)][s(318)],fe[s(212)][s(236)],![])),1))]),x("div",nt,[x("span",null,C(R(ie)[s(259)])+": "+C(R(Re)(fe["value"][s(290)])),1)]),x("div",st,[n[10]||(n[10]=x("span",null,"Status: ",-1)),x("span",rt,"  "+C(R(ye)(fe[s(212)]["status"])),1)]),x("div",at,[n[12]||(n[12]=x("span",null,"Ausführung: ",-1)),x("span",ot,"  "+C(R(le)(fe[s(212)])),1),fe[s(212)]&&fe["value"][s(319)]?(f(),c("span",it,[M(a,{to:{name:"a.detail",params:{id:fe[s(212)]["successor"]["_id"]}}},{default:P((()=>[n[11]||(n[11]=j("  ",-1)),x("i",{class:"material-symbols-outlined leading-tight cursor-pointer text-xl",title:fe[s(212)]["successor"]["title"]??fe["value"][s(319)]["id"]},"link",8,ct)])),_:1},8,["to"])])):S("",!![])]),fe[s(212)]?.[s(230)]?.["edges"]&&fe[s(212)]?.[s(230)]?.["edges"]?.[s(258)]>0?(f(),c("div",lt,[x("span",null,C(fe["value"]?.["resources"]?.[s(297)]?.[s(258)]===1?R(ie)[s(228)]:R(ie)[s(197)])+":",1),(f(!![]),c(l,null,u(fe[s(212)]["resources"]["edges"],(e=>{const t=s;return f(),c("span",{key:e?.[t(315)]?.["id"],class:"flex items-center font-semibold text-fontPassive"},[j("  "+C(e?.[t(315)]?.[t(192)][t(234)])+" "+C(e?.[t(315)]?.[t(192)]["description"]?"("+e?.[t(315)]?.[t(192)][t(201)]+")":"")+" ",1),L((f(),c("i",{class:T(["material-symbols-outlined leading-tight cursor-default text-xl",{"text-green-500":e?.[t(315)]?.["booked"]===R(o)[t(277)],"text-red-500":e?.[t(315)]?.[t(226)]===R(o)[t(196)],"text-orange-500":e?.[t(315)]?.[t(226)]===R(o)[t(229)],"text-gray-500":e?.[t(315)]?.[t(226)]===R(o)[t(301)]}])},[j(C(R(Me)(e?.[t(315)]?.["booked"])),1)],2)),[[m,{content:R(Se)(e?.[t(315)]?.[t(226)]),placement:"bottom"}]])])})),128))])):S("",!![]),(Gt[s(212)]?.[s(256)]??-1)>-1?(f(),c("div",ut,[x("span",null,C(R(ie)[s(224)])+":",1),x("span",dt,[x("span",{class:T({"text-messageConfirm":Gt[s(212)]?.[s(256)]===1,"text-messageDecline":Gt[s(212)]?.[s(256)]===2,"text-yellow-500":Gt["value"]?.["absenceStatEligibility"]===3,"":Gt[s(212)]?.[s(256)]===4})},[j(C(R(ee)(Gt["value"]?.[s(256)]??-1))+" ",1),M(p,{icon:["fas",R(te)(Gt[s(212)]?.[s(256)]??-1)]},null,8,["icon"])],2)])])):S("",!![])]),fe[s(212)][s(227)]?(f(),c("div",ft,[x("div",pt,[M(p,{icon:["fas","fa-redo"]}),n[13]||(n[13]=x("span",{class:"author mx-1"},"Neuer Termin:",-1))]),M(Fe,{messages:[fe[s(212)][s(227)]]},null,8,["messages"])])):S("",!![]),Et[s(212)]["length"]?(f(),c("div",mt,[x("div",vt,[M(p,{icon:["fas","fa-undo"]}),x("span",gt,C(Et["value"]["length"]===1?"Ersetzter Termin:":"Ersetzte Termine:"),1)]),M(Fe,{messages:Et[s(212)]},null,8,["messages"])])):S("",!![]),fe[s(212)][s(263)]?(f(),c("div",ht,[x("div",yt,[M(p,{icon:["fas","fa-turn-up"]}),n[14]||(n[14]=x("span",{class:"author mx-1"},"Übergeordneter Termin:",-1))]),M(Fe,{messages:[fe["value"]["predecessor"]]},null,8,["messages"])])):S("",!![]),Ut[s(212)][s(258)]?(f(),c("div",bt,[x("div",_t,[M(p,{icon:["fas","fa-turn-down"]}),x("span",kt,C(Ut[s(212)][s(258)]===1?"Untergeordneter Termin:":"Untergeordnete Termine:"),1)]),M(Fe,{messages:Ut["value"]},null,8,["messages"])])):S("",!![]),Wt[s(212)]?(f(),c("div",wt,[x("div",It,[M(p,{icon:["fas","fa-suitcase"]}),x("span",xt,C(R(ie)[s(312)])+":",1)]),M($,{messageRecipient:Gt["value"]},null,8,["messageRecipient"])])):S("",!![]),(fe[s(212)][s(273)]??"")[s(258)]>0?(f(),c("div",{key:5,class:"message-html overflow-auto h-full box-border p-6 border-b-2 border-b-backgroundContrast",innerHTML:fe[s(212)]["body"]},null,8,Ct)):(f(),c("p",Rt,C(R(ie)[s(215)]),1)),M(e,{message:fe[s(212)]},null,8,["message"]),Te[s(212)][s(258)]>0?(f(),c("div",St,[(f(!![]),c(l,null,u(Te[s(212)],((e,t)=>(f(),d(E,{key:t,attachment:e},null,8,["attachment"])))),128))])):S("",!![]),Dt[s(212)][s(258)]?(f(),c("div",Mt,[M(X,{tags:Dt[s(212)],scope:"appointment"},null,8,["tags"])])):S("",!![]),x("div",At,[me["value"]>0?(f(),d(U,{key:0,text:(ve[s(212)]!==me[s(212)]?ve["value"]+"/"+me[s(212)]:me["value"])+" "+(me[s(212)]>1?R(ie)["superintendentPlural"]:R(ie)[s(207)]),active:Ce["value"]==="author",onClicked:n[1]||(n[1]=e=>ze("author"))},null,8,["text","active"])):S("",!![]),ge[s(212)]>0&&!R(Z)[s(307)]?(f(),d(U,{key:1,text:(he[s(212)]!==ge["value"]?he["value"]+"/"+ge["value"]:ge[s(212)])+" "+(ge["value"]>1?R(ie)[s(245)]:R(ie)[s(313)]),active:Ce[s(212)]==="recipient",onClicked:n[2]||(n[2]=e=>ze("recipient"))},null,8,["text","active"])):S("",!![]),be[s(212)]>0&&!R(Z)[s(307)]?(f(),d(U,{key:2,text:be[s(212)]+" "+(be["value"]>1?R(ie)[s(240)]:R(ie)["informedPeopleSingular"]),active:Ce[s(212)]==="inform",onClicked:n[3]||(n[3]=e=>ze("inform"))},null,8,["text","active"])):S("",!![]),je["value"]&&Pe["value"]&&_e[s(212)]>0&&!R(Z)[s(307)]?(f(),d(U,{key:3,text:_e[s(212)]+" "+(_e[s(212)]>1?R(ie)[s(261)]:R(ie)["registerOthersSingular"]),active:Ce[s(212)]==="registerOthers",onClicked:n[4]||(n[4]=e=>ze("registerOthers"))},null,8,["text","active"])):S("",!![]),je[s(212)]&&Ae[s(212)]&&ke[s(212)]>0&&!R(Z)[s(307)]?(f(),d(U,{key:4,text:ke[s(212)]+" "+(ke["value"]>1?R(ie)[s(200)]:R(ie)[s(285)]),active:Ce[s(212)]==="registerMyself",onClicked:n[5]||(n[5]=e=>ze("registerMyself"))},null,8,["text","active"])):S("",!![]),je[s(212)]&&(Ae[s(212)]||Pe[s(212)])&&we[s(212)]>0&&!R(Z)[s(307)]?(f(),d(U,{key:5,text:we[s(212)]+" "+(we[s(212)]>1?R(ie)[s(278)]:R(ie)["registerCandidateSingular"]),active:Ce[s(212)]==="registerCandidate",onClicked:n[6]||(n[6]=e=>ze("registerCandidate"))},null,8,["text","active"])):S("",!![]),je[s(212)]&&(fe["value"]["iCanUnRegisterOthers"]||fe[s(212)][s(302)])&&!R(Z)[s(307)]?(f(),d(U,{key:6,text:"Meine Registrationen",active:Ce[s(212)]==="myRegistrations",onClicked:n[7]||(n[7]=e=>ze("myRegistrations"))},null,8,["active"])):S("",!![])]),Ie[s(212)]&&xe[s(212)]===null?(f(),c("div",Pt,[x("div",Ot,[(f(!![]),c(l,null,u($t[s(212)],(e=>{const t=s;return f(),d(ne,{key:Ce["value"]+t(217)+e,class:T(["h-[1.1rem]",Xt[Math[t(252)](Math["random"]()*Xt[t(258)])]])},null,8,["class"])})),128))])])):Ie["value"]&&xe["value"]!==null&&xe[s(212)]?.[s(258)]===0?(f(),c("div",Tt,C(R(ie)[s(272)]),1)):Ie["value"]&&xe["value"]!==null&&xe[s(212)]?.[s(258)]>0?(f(),c("ul",jt,[(f(!![]),c(l,null,u(xe[s(212)],(e=>{const t=s;return f(),c("li",{key:e[t(316)],class:"people-list-element"},[Ce[t(212)]==="myRegistrations"?(f(),d(H,{key:0,icon:"bin",iconSet:"isy",mode:"seamless",onClicked:t=>Zt(e)},null,8,["onClicked"])):S("",!![]),Ce[t(212)]==="myRegistrations"&&R(Z)[t(286)][t(309)]?.[t(316)]!==e[t(309)][t(316)]?(f(),d(H,{key:1,icon:"edit",iconSet:"isy",mode:"seamless",onClicked:n=>R(re)[t(292)]({name:"a.register-others.edit",params:{id:fe[t(212)]?.[t(316)],pId:e[t(309)]?.[t(316)]}})},null,8,["onClicked"])):S("",!![]),Ce["value"]==="myRegistrations"&&R(Z)[t(286)][t(309)]?.["_id"]===e[t(309)][t(316)]?(f(),d(H,{key:2,icon:"edit",iconSet:"isy",mode:"seamless",onClicked:n=>R(re)["push"]({name:"a.register-self.edit",params:{id:fe["value"]?.[t(316)],pId:e["person"]?.[t(316)]}})},null,8,["onClicked"])):S("",!![]),M(G,{class:T(["hover:underline cursor-pointer",{"line-through":e[t(220)]}]),person:e[t(309)],onClick:n=>R(re)["push"]({name:"people.detail",params:{personId:e["person"][t(316)]}}),lastnameFirst:!![]},null,8,["class","person","onClick"])])})),128))])):S("",!![]),r[s(283)]==="standalone"?(f(),c("div",Nt,[(f(!![]),c(l,null,u(ue[s(212)],(e=>{const t=s;return f(),d(H,{key:e[t(193)],icon:e["icon"],label:e["label"],subLabel:e[t(223)],iconSet:e["iconSet"],fontSize:e[t(284)],lineBreak:e[t(205)],mode:"square",onClicked:t=>Kt(e)},null,8,["icon","label","subLabel","iconSet","fontSize","lineBreak","onClicked"])})),128))])):S("",!![])])])]))])}}});const qt=Z(Ft,[["__scopeId","data-v-b3c6e905"]]);export{qt as _,le as a,be as l,ye as s};
