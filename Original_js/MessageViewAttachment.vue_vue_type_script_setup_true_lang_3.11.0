import{d as t,aj as n,u as e,r as o,U as s,m as a,G as i,c as r,a as c,J as l,t as u,b as d,Y as f,H as p,e as m,h as w,aq as b,y as h,d7 as y,k as v}from"./index_3.11.0.22--2602021337_b7dc42e999.js";import{i as k}from"./file_3.11.0.22--2602021337_b7dc42e999.js";(function(t,n){const e=j,o=t();while(!![])try{const t=-parseInt(e(411))/1+-parseInt(e(448))/2+-parseInt(e(447))/3+parseInt(e(414))/4+-parseInt(e(417))/5+parseInt(e(415))/6*(parseInt(e(400))/7)+-parseInt(e(407))/8*(-parseInt(e(422))/9);if(t===n)break;else o["push"](o["shift"]())}catch(s){o["push"](o["shift"]())}})(g,375394);const _=function(){let t=!![];return function(n,e){const o=t?function(){const t=j;if(e){const o=e[t(405)](n,arguments);return e=null,o}}:function(){};return t=![],o}}(),x=_(void 0,(function(){const t=j;return x[t(406)]()[t(438)](t(433))[t(406)]()[t(429)](x)[t(438)](t(433))}));function g(){const t=["252GZDyiK","smallThumbUrl","3399375RaIsGj","location","filename","total","trace","875331qLZRjO","table","close","return (function() ","copy","href","info","constructor","setAttribute","mimetype","appendChild","(((.+)+)+)+$","prototype","createObjectURL","bind","host","search","loaded","createElement","doDownload","warn","document","attachment","/docMsgAttachment/","description","2175792nLDWof","817832bUbnoa","78603GHxWeb","body","URL","console","value","apply","toString","136iLUJcc","_id","removeChild","exception","161231SmGrwq","__proto__","protocol","902636IDzJQc"];g=function(){return t};return g()}x();const C=function(){let t=!![];return function(n,e){const o=t?function(){const t=j;if(e){const o=e[t(405)](n,arguments);return e=null,o}}:function(){};return t=![],o}}(),I=C(void 0,(function(){const t=j,n=function(){const t=j;let n;try{n=Function(t(425)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n},e=n(),o=e[t(403)]=e[t(403)]||{},s=["log",t(442),t(428),"error",t(410),t(423),t(421)];for(let a=0;a<s["length"];a++){const n=C[t(429)][t(434)]["bind"](C),e=s[a],i=o[e]||n;n[t(412)]=C[t(436)](C),n[t(406)]=i[t(406)]["bind"](i),o[e]=n}}));I();function j(t,n){const e=g();return j=function(t,n){t-=400;let o=e[t];return o},j(t,n)}const U={class:"border-2 border-backgroundContrast box-border p-3 flex justify-between items-center overflow-hidden max-w-full print:border-hidden"},D=["src"],L={class:"w-full overflow-hidden"},G=["title"],R={key:1,class:"font-semibold text-fontPassive"},S={key:0,class:"w-full flex items-center"},A={class:"relative border-1px border-fontColor rounded-full w-full bg-backgroundContrast h-2 overflow-hidden"},F={class:"flex justify-center items-center ml-6"};const q=t({__name:"MessageViewAttachment",props:{attachment:{}},setup(t){const _=t,x=n(),g=e(),C=o(),I=o(0),q=o(![]),J=s((()=>{const t=j,n=_[t(444)][t(443)]?.[t(416)];return n?a(n):void 0})),M=s((()=>{const t=j;return _[t(444)][t(443)]?.[t(446)]??_[t(444)]["document"]?.[t(419)]??""}));async function B(t=![]){const n=j;if(t||!C["value"]){q[n(404)]=!![];const t=_[n(444)][n(443)]?.["id"];if(!t)return;const e=await y(t,{onDownloadProgress:t=>{const e=n;I[e(404)]=Math["round"](t[e(439)]*100/(t[e(420)]??t["loaded"]))}});if(!e){v(g["couldNotDownloadFile"]),I["value"]=0,q[n(404)]=![];return}C["value"]=e,q["value"]=![]}}async function H(){const t=j;await B();if(!C[t(404)])return;const n=new Blob([C[t(404)]],{type:_[t(444)][t(443)]?.["mimetype"]??"application/octet-stream"}),e=new File([n],_[t(444)][t(443)]?.[t(419)]??"download",{type:_[t(444)][t(443)]?.[t(431)]??"application/octet-stream"}),o=window[t(402)][t(435)](e),s=document[t(440)]("a");s[t(427)]=o,s["target"]="_blank",s[t(430)]("download",_[t(444)][t(443)]?.["filename"]??"download"),document["body"][t(432)](s),s["click"](),document[t(401)][t(409)](s)}async function N(){const t=j;if(!k(_[t(444)][t(443)]?.[t(431)]??"")){await H();return}const n=window["open"]("","_blank");if(!n)return await H();await B();if(!C[t(404)]){n[t(424)]();return}const e=new Blob([C[t(404)]],{type:_[t(444)][t(443)]?.[t(431)]??"application/octet-stream"}),o=new File([e],_["attachment"][t(443)]?.[t(419)]??"download",{type:_[t(444)][t(443)]?.[t(431)]??"application/octet-stream"}),s=window["URL"][t(435)](o);n[t(418)]=s}const O=s((()=>{const t=j;return location[t(413)]+"//"+location[t(437)]})),P=s((()=>{const t=j;return O[t(404)]+t(445)+_[t(444)][t(408)]}));function W(){const t=j;x[t(426)](P[t(404)]),b(g["urlCopied"])}return i((()=>_["attachment"]),(()=>{const t=j;C[t(404)]=void 0,I[t(404)]=0,q[t(404)]=![]})),(t,n)=>{const e=j;return h(),r("div",U,[c("img",{src:J[e(404)],class:"h-12 print:hidden"},null,8,D),c("div",L,[M[e(404)]?(h(),r("span",{key:0,class:"text-lg underline cursor-pointer mx-4 whitespace-nowrap text-ellipsis w-full",title:M["value"],onClick:n[0]||(n[0]=t=>N())},u(M[e(404)]),9,G)):(h(),r("span",R,u(d(g)["noName"]),1))]),q[e(404)]||C["value"]!==void 0?(h(),r("div",S,[c("div",A,[c("div",{class:"absolute top-0 left-0 bg-primaryColor h-full",style:f({width:I[e(404)]+"%"})},null,4)])])):l("",!![]),c("div",F,[!q[e(404)]?(h(),p(w,{key:0,mode:"seamless",icon:"file_download",iconSet:"material",title:d(g)[e(441)],onClicked:n[1]||(n[1]=t=>H())},null,8,["title"])):(h(),p(w,{key:1,mode:"seamless",icon:"spinner fa-spin",iconSet:"fontAwesome",title:d(g)[e(441)],disabled:!![],onClicked:n[2]||(n[2]=t=>H())},null,8,["title"])),m(w,{mode:"seamless",icon:"content_copy",iconSet:"material",title:P[e(404)],onClicked:n[3]||(n[3]=t=>W())},null,8,["title"])])])}}});export{q as _};
