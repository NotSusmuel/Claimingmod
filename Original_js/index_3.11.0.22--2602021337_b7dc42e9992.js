var e=Object.defineProperty;var t=(t,n,o)=>n in t?e(t,n,{enumerable:true,configurable:true,writable:true,value:o}):t[n]=o;var n=(e,n,o)=>t(e,typeof n!=="symbol"?n+"":n,o);import{de as o,df as r}from"./echarts_3.11.0.22--2602021337_b7dc42e999.js";import{d as s,cC as i,dc as a,bb as c,U as u,cr as l,G as f,be as d,E as p,au as h,cD as g,bh as v,eC as y,eD as m,bg as b,cm as S}from"./index_3.11.0.22--2602021337_b7dc42e999.js";const O=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function j(e){function t(t){const n=function(...n){if(!e.value)throw new Error("ECharts is not initialized yet.");return Reflect.apply(e.value[t],e.value,n)};return n}return O.reduce(((e,n)=>{e[n]=t(n);return e}),{})}function w(e,t,n){f([n,e,t],(([e,t,n],o,s)=>{let i=null;if(e&&t&&n){const{offsetWidth:o,offsetHeight:s}=e;const{throttle:a=100,onResize:c}=n===true?{}:n;let u=false;const l=()=>{t.resize();c?.()};const f=a?r(l,a):l;i=new ResizeObserver((()=>{if(!u){u=true;if(e.offsetWidth===o&&e.offsetHeight===s)return}if(e.offsetWidth===0||e.offsetHeight===0)return;f()}));i.observe(e)}s((()=>{if(i){i.disconnect();i=null}}))}))}const A={autoresize:[Boolean,Object]};const z=Symbol();function M(e,t,n){const o=a(z,{});const r=u((()=>({...l(o),...n?.value})));d((()=>{const n=e.value;if(!n)return;if(t.value)n.showLoading(r.value);else n.hideLoading()}))}const C={loading:Boolean,loadingOptions:Object};function x(){return typeof window!=="undefined"&&typeof document!=="undefined"}const E=/^on[^a-z]/;const _=e=>E.test(e);function L(e){const t={};for(const n in e)if(!_(n))t[n]=e[n];return t}function k(e){const t=Number(e);return Number.isInteger(t)&&t>=0&&t<Math.pow(2,32)-1&&String(t)===e}function D(e,t){const n=new Set(e);const o=new Set(t);if(n.size!==o.size)return false;for(const r of n)if(!o.has(r))return false;return true}function U(e){return e!=null&&typeof e==="object"&&!Array.isArray(e)}const H={tooltip:["tooltip","formatter"],dataView:["toolbox","feature","dataView","optionToContent"]};const T=Object.keys(H);function I(e){return T.some((t=>e===t||e.startsWith(t+"-")))}function R(e,t){const n=x()?document.createElement("div"):void 0;const o=y({});const r=y({});const s=y({});const a=i(false);const c=()=>a.value&&n?g(S,{to:n},Object.entries(e).filter((([e])=>I(e))).map((([e,t])=>{const n=e;return g("div",{ref:e=>{if(e instanceof HTMLElement)o[n]=e},style:{display:"contents"}},r[n]?t?.(s[n]):void 0)}))):void 0;function u(e){return e!==null&&typeof e==="object"&&!Array.isArray(e)}function l(t){const n={...t};const i=(e,t)=>{const n=e[t];if(Array.isArray(n)){e[t]=[...n];return e[t]}if(u(n)){e[t]={...n};return e[t]}if(n===void 0){e[t]=k(t)?[]:{};return e[t]}};Object.keys(e).filter((e=>{const t=I(e);return t})).forEach((e=>{const[t,...a]=e.split("-");const c=H[t];if(!c)return;const u=[...a,...c];if(u.length===0)return;let l=n;for(let n=0;n<u.length-1;n++){l=i(l,u[n]);if(!l)return}l[u[u.length-1]]=t=>{r[e]=true;s[e]=t;return o[e]}}));return n}let f=[];m((()=>{const n=Object.keys(e).filter(I);if(!D(n,f)){f.forEach((e=>{if(!n.includes(e)){delete s[e];delete r[e];delete o[e]}}));f=n;t()}}));p((()=>{a.value=true}));b((()=>{n?.remove()}));return{teleportedSlots:c,patchOption:l}}let W=null;const N="x-vue-echarts";function P(){if(W!=null)return W;const e=globalThis.customElements;if(!x()||!e?.get){W=false;return W}if(!e.get(N))try{class t extends HTMLElement{constructor(){super(...arguments);n(this,"__dispose",null)}disconnectedCallback(){if(this.__dispose){this.__dispose();this.__dispose=null}}}e.define(N,t)}catch{W=false;return W}W=true;return W}function B(e){if(!U(e))return;const t=e.id;if(typeof t==="string")return t;if(typeof t==="number"&&Number.isFinite(t))return String(t)}function F(e){const t=e;const n=Array.isArray(t.options)?t.options.length:0;const o=Array.isArray(t.media)?t.media.length:0;const r=Object.create(null);const s=[];const i=[];for(const a of Object.keys(t)){if(a==="options"||a==="media")continue;const e=t[a];if(Array.isArray(e)){const t=e;const n=new Set;let o=0;for(let e=0;e<t.length;e++){const r=B(t[e]);if(r!==void 0)n.add(r);else o++}r[a]={idsSorted:n.size>0?Array.from(n).sort():[],noIdCount:o}}else if(U(e))s.push(a);else if(e!==void 0)i.push(a)}if(s.length>1)s.sort();if(i.length>1)i.sort();return{optionsLength:n,mediaLength:o,arrays:r,objects:s,scalars:i}}function V(e,t){if(e.length===0)return[];if(t.length===0)return e.slice();const n=new Set(t);const o=[];for(let r=0;r<e.length;r++){const t=e[r];if(!n.has(t))o.push(t)}return o}function $(e,t){if(e.length===0)return false;if(t.length===0)return true;const n=new Set(t);for(let o=0;o<e.length;o++)if(!n.has(e[o]))return true;return false}function G(e,t){const n=F(t);if(!e)return{option:t,signature:n,plan:{notMerge:false}};if(n.optionsLength<e.optionsLength)return{option:t,signature:n,plan:{notMerge:true}};if(n.mediaLength<e.mediaLength)return{option:t,signature:n,plan:{notMerge:true}};if(V(e.scalars,n.scalars).length>0)return{option:t,signature:n,plan:{notMerge:true}};const o=new Set;const r=new Map;const s=V(e.objects,n.objects);for(let u=0;u<s.length;u++)r.set(s[u],null);for(const u of Object.keys(e.arrays)){const t=e.arrays[u];if(!t)continue;const s=n.arrays[u];if(!s){if(t.idsSorted.length>0||t.noIdCount>0){r.set(u,[]);o.add(u)}continue}if($(t.idsSorted,s.idsSorted)){o.add(u);continue}if(s.noIdCount<t.noIdCount)o.add(u)}let i=t;let a=n;if(r.size>0){const e={...t};r.forEach(((t,n)=>{e[n]=t}));i=e;a=F(i)}const c=o.size>0?Array.from(o).sort():void 0;return{option:i,signature:a,plan:c?{notMerge:false,replaceMerge:c}:{notMerge:false}}}var Z="x-vue-echarts{display:block;width:100%;height:100%;min-width:0;}\nx-vue-echarts>:first-child,x-vue-echarts>:first-child>canvas{border-radius:inherit;}\n";if(typeof document!=="undefined")if(Array.isArray(document.adoptedStyleSheets)&&"replaceSync"in CSSStyleSheet.prototype){const e=new CSSStyleSheet;e.replaceSync(Z);document.adoptedStyleSheets=[...document.adoptedStyleSheets,e]}else{const e=document.createElement("style");e.textContent=Z;document.head.appendChild(e)}const q=P();const J=Symbol();const K=Symbol();const Q=Symbol();var X=s({name:"Echarts",inheritAttrs:false,props:{option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean,...A,...C},emits:{},slots:Object,setup(e,{attrs:t,expose:n,slots:r}){const s=i();const y=i();const m=a(J,null);const b=a(K,null);const S=a(Q,null);const{autoresize:O,manualUpdate:A,loading:z,loadingOptions:C}=c(e);const x=u((()=>e.theme||l(m)));const E=u((()=>e.initOptions||l(b)||void 0));const k=u((()=>e.updateOptions||l(S)));const D=u((()=>L(t)));const U={};const H=new Map;const{teleportedSlots:T,patchOption:I}=R(r,(()=>{if(!A.value&&e.option&&y.value)B(y.value,e.option)}));let W;function P(e){const t={};const n=(e?.replaceMerge??[]).filter((e=>e!=null));if(n.length>0)t.replaceMerge=[...new Set(n)];if(e?.notMerge!==void 0)t.notMerge=e.notMerge;return t}function B(e,t,n,o=false){const r=I(t);if(o){e.setOption(r,n??{});W=void 0;return}if(k.value){const t=n??k.value;e.setOption(r,t);W=void 0;return}const s=G(W,r);const i=P(s.plan);e.setOption(s.option,i);W=s.signature}Object.keys(t).filter((e=>_(e))).forEach((e=>{if(e.indexOf("Native:")===2){const n=`on${e.charAt(9).toUpperCase()}${e.slice(10)}`;U[n]=t[e];return}let n=e.charAt(2).toLowerCase()+e.slice(3);let o;if(n.indexOf("zr:")===0){o=true;n=n.substring(3)}let r;if(n.substring(n.length-4)==="Once"){r=true;n=n.substring(0,n.length-4)}H.set({event:n,zr:o,once:r},t[e])}));function F(){if(!s.value)return;const t=y.value=o(s.value,x.value,E.value);if(e.group)t.group=e.group;H.forEach(((e,{zr:n,once:o,event:r})=>{if(!e)return;const s=n?t.getZr():t;if(o){const t=e;let n=false;e=(...o)=>{if(n)return;n=true;t(...o);s.off(r,e)}}s.on(r,e)}));function n(){if(t&&!t.isDisposed())t.resize()}function r(){const{option:n}=e;if(A.value){if(n)B(t,n,void 0,true);return}if(n)B(t,n)}if(O.value)v((()=>{n();r()}));else r()}const V=(t,n,o)=>{if(!e.manualUpdate)return;const r=typeof n==="boolean"?{notMerge:n,lazyUpdate:o}:n;if(!y.value)return;B(y.value,t,r??void 0,true)};function $(){if(y.value){y.value.dispose();y.value=void 0}W=void 0}f((()=>e.option),(e=>{if(!e){W=void 0;return}if(A.value)return;if(!y.value)return;B(y.value,e)}),{deep:true});f([A,E],(()=>{$();F()}),{deep:true});f(x,(e=>{y.value?.setTheme(e||{})}),{deep:true});d((()=>{if(e.group&&y.value)y.value.group=e.group}));const Z=j(y);M(y,z,C);w(y,O,s);p((()=>{F()}));h((()=>{if(q&&s.value)s.value.__dispose=$;else $()}));n({setOption:V,root:s,chart:y,...Z});return()=>g(N,{...D.value,...U,ref:s,class:["echarts",D.value.class]},T())}});var Y=X;export{K as INIT_OPTIONS_KEY,z as LOADING_OPTIONS_KEY,J as THEME_KEY,Q as UPDATE_OPTIONS_KEY,Y as default};
