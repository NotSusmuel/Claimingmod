import"./Priority_3.11.0.22--2602021337_b7dc42e999.js";import{bD as t,d as e,U as n,d3 as r,c as s,S as o,y as a,z as i,ar as c,ai as u,q as l,ah as f,aJ as d,T as p,u as m,r as y,G as h,J as v,a as b,t as S,F as g,D as w,H as I,a6 as _,b as E,w as k,j as T,h as R,e as F,k as D,a9 as L,B as M}from"./index_3.11.0.22--2602021337_b7dc42e999.js";import{F as O,_ as J}from"./FormElementRender_3.11.0.22--2602021337_b7dc42e999.js";const x=t("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);(function(t,e){const n=U,r=t();while(!![])try{const t=parseInt(n(294))/1*(-parseInt(n(316))/2)+parseInt(n(303))/3*(parseInt(n(321))/4)+parseInt(n(309))/5*(parseInt(n(317))/6)+-parseInt(n(318))/7*(-parseInt(n(310))/8)+parseInt(n(320))/9+-parseInt(n(300))/10+parseInt(n(295))/11;if(t===e)break;else r["push"](r["shift"]())}catch(s){r["push"](r["shift"]())}})(V,482853);const A=function(){let t=!![];return function(e,n){const r=t?function(){const t=U;if(n){const r=n[t(311)](e,arguments);return n=null,r}}:function(){};return t=![],r}}(),H=A(void 0,(function(){const t=U;return H[t(315)]()["search"]("(((.+)+)+)+$")["toString"]()[t(324)](H)[t(296)](t(304))}));function U(t,e){const n=V();return U=function(t,e){t-=294;let r=n[t];return r},U(t,e)}H();const q=function(){let t=!![];return function(e,n){const r=t?function(){const t=U;if(n){const r=n[t(311)](e,arguments);return n=null,r}}:function(){};return t=![],r}}(),N=q(void 0,(function(){const t=U;let e;try{const n=Function(t(312)+'{}.constructor("return this")( ));');e=n()}catch(s){e=window}const n=e["console"]=e["console"]||{},r=["log",t(307),"info",t(306),t(299),t(322),t(297)];for(let o=0;o<r[t(319)];o++){const e=q[t(324)][t(313)][t(305)](q),s=r[o],a=n[s]||e;e["__proto__"]=q["bind"](q),e["toString"]=a[t(315)][t(305)](a),n[s]=e}}));N();function V(){const t=["3445965JUBfyv","100jMbUmB","table","value","constructor","742922DpkKzu","6787715eYaIVX","search","trace","toLowerCase","exception","7661910vwujei","priority","Normal","94839yeKqAD","(((.+)+)+)+$","bind","error","warn","trim","415HEMiGy","400mVfLcp","apply","return (function() ","prototype","solid","toString","2qindEM","1962TZkFuJ","24437xMPArw","length"];V=function(){return t};return V()}const j=e({__name:"PriorityCircle",props:{priority:{},solid:{type:Boolean}},setup(t){const e=t,i=n((()=>{const t=U;if(e[t(301)]===null||e[t(301)]===void 0)return r[t(302)];return e[t(301)]})),c=()=>{const t=U,n="circle--"+i[t(323)][t(298)](),r=e[t(314)]?"circle--filled-"+i[t(323)][t(298)]():"";return(n+" "+r)[t(308)]()};return(t,e)=>(a(),s("div",{class:o(["priority__circle print:hidden",c()])},null,2))}});const z=i(j,[["__scopeId","data-v-83289acc"]]);const B=$;(function(t,e){const n=$,r=t();while(!![])try{const t=parseInt(n(222))/1*(-parseInt(n(237))/2)+parseInt(n(214))/3*(parseInt(n(231))/4)+-parseInt(n(226))/5*(parseInt(n(241))/6)+-parseInt(n(242))/7+parseInt(n(224))/8+-parseInt(n(223))/9+parseInt(n(211))/10;if(t===e)break;else r["push"](r["shift"]())}catch(s){r["push"](r["shift"]())}})(Z,818097);const P=function(){let t=!![];return function(e,n){const r=t?function(){const t=$;if(n){const r=n[t(210)](e,arguments);return n=null,r}}:function(){};return t=![],r}}(),Y=P(void 0,(function(){const t=$;return Y[t(239)]()[t(212)]("(((.+)+)+)+$")[t(239)]()["constructor"](Y)["search"](t(208))}));Y();const C=function(){let t=!![];return function(e,n){const r=t?function(){const t=$;if(n){const r=n[t(210)](e,arguments);return n=null,r}}:function(){};return t=![],r}}(),W=C(void 0,(function(){const t=$,e=function(){const t=$;let e;try{e=Function("return (function() "+t(219)+");")()}catch(n){e=window}return e},n=e(),r=n[t(236)]=n[t(236)]||{},s=[t(216),t(207),t(217),"error",t(240),"table","trace"];for(let o=0;o<s[t(229)];o++){const e=C[t(218)][t(235)]["bind"](C),n=s[o],a=r[n]||e;e[t(220)]=C[t(232)](C),e[t(239)]=a["toString"][t(232)](a),r[n]=e}}));function Z(){const t=["warn","(((.+)+)+)+$","FETCH_SURVEYRESULT_DETAIL","apply","22921160uvJpwx","search","UPDATE_SURVEY_RESULT","447JzdYHW","query","log","info","constructor",'{}.constructor("return this")( )',"__proto__","createSurveyResult","1WDrbMn","14178798CPVPHR","11448944gsJWTy","handleApolloError","25OVPYOp","updateSurveyresult","catch","length","CREATE_SURVEY_RESULT","25964Oaktwh","bind","data","createSurveyresult","prototype","console","3232646SUsZtj","mutate","toString","exception","791220RsYYzf","148407anlLim","surveyresult","fetchSurveyResultDetail"];Z=function(){return t};return Z()}W();function $(t,e){const n=Z();return $=function(t,e){t-=205;let r=n[t];return r},$(t,e)}class G{async[B(221)](t){const e=B;let n;const r=c(u[e(205)][e(230)],{variables:{input:t}});return r["onDone"]((t=>{const r=e;if(t[r(233)]?.[r(234)]?.[r(205)]){n=t[r(233)][r(234)][r(205)];return}l("create survey result error")})),await r[e(238)](),n}async["updateSurveyResult"](t){const e=B;let n;const r=c(u[e(205)][e(213)],{variables:{input:t}});return r["onDone"]((t=>{const r=e;if(t["data"]?.[r(227)]?.[r(205)]){n=t[r(233)][r(227)][r(205)];return}l("update survey result error")})),await r["mutate"](),n}async[B(206)](t){const e=B,n=await f["query"]()({query:d[e(205)][e(209)],variables:{id:t},fetchPolicy:"no-cache"})[e(228)]((t=>{const n=e;f[n(225)](t)}));return n}async["findSurveyResults"](t,e){const n=B,r=await f[n(215)]()({query:d[n(205)]["FIND_SURVEYRESULTS"],variables:{message:t,person:e},fetchPolicy:"no-cache"})["catch"]((t=>{const e=n;f[e(225)](t)}));return r}}(function(t,e){const n=dt,r=t();while(!![])try{const t=-parseInt(n(310))/1+parseInt(n(254))/2*(-parseInt(n(308))/3)+parseInt(n(287))/4*(-parseInt(n(271))/5)+parseInt(n(316))/6*(-parseInt(n(269))/7)+-parseInt(n(298))/8+-parseInt(n(301))/9+parseInt(n(295))/10*(parseInt(n(290))/11);if(t===e)break;else r["push"](r["shift"]())}catch(s){r["push"](r["shift"]())}})(pt,874104);const Q=function(){let t=!![];return function(e,n){const r=t?function(){if(n){const t=n["apply"](e,arguments);return n=null,t}}:function(){};return t=![],r}}(),X=Q(void 0,(function(){const t=dt;return X[t(281)]()[t(317)](t(256))["toString"]()["constructor"](X)[t(317)](t(256))}));X();const K=function(){let t=!![];return function(e,n){const r=t?function(){const t=dt;if(n){const r=n[t(314)](e,arguments);return n=null,r}}:function(){};return t=![],r}}(),tt=K(void 0,(function(){const t=dt;let e;try{const n=Function(t(261)+t(259)+");");e=n()}catch(s){e=window}const n=e[t(260)]=e[t(260)]||{},r=[t(309),"warn",t(276),t(279),"exception",t(303),t(296)];for(let o=0;o<r["length"];o++){const e=K[t(305)][t(255)]["bind"](K),s=r[o],a=n[s]||e;e["__proto__"]=K[t(306)](K),e[t(281)]=a[t(281)][t(306)](a),n[s]=e}}));tt();const et={key:0,class:"form-container"},nt={class:"text-lg font-semibold select-none"},rt={key:0,class:"form-info"},st={key:1,class:"form-info"},ot={class:"flex flex-end"},at={key:1,class:"form-container"},it={key:0,class:"form-info"},ct={key:1,class:"form-info"},ut={class:"message-old-school-form-body"},lt=["innerHTML"],ft={key:2,class:"form-container"};function dt(t,e){const n=pt();return dt=function(t,e){t-=254;let r=n[t];return r},dt(t,e)}function pt(){const t=["stringify","info","replace","innerHTML","error","updateOnly","toString","target","parse","auth","isInCurrentTimeRange","getFormSubmission","255264WzyNjT","body","outerHTML","3971NtkkYZ","includes","isValidForm","type","surveyresults","145330tbHser","trace","formSubmitSuccess","5171824hQqZgl","data","createSurveyResult","9095274GtXupT","formSubmitError","table","iCanEdit","constructor","bind","value","252981OvJjga","log","530178WlfIZa","updateSurveyResult","querySelectorAll","person","apply","node","24ONVBrt","search","18wOLqVQ","prototype","(((.+)+)+)+$","getSortedElements","pleaseFillOutAllRequiredFields",'{}.constructor("return this")( )',"console","return (function() ","option","edges","message",'[name="',"doSend","form","removeAttribute","1155581uBDeay","setAttribute","60QTPlGX","findSurveyResults","forEach","result"];pt=function(){return t};return pt()}const mt=e({__name:"MessageForm",props:{message:{default:void 0},updateOnly:{type:Boolean,default:![]}},setup(t){const e=dt,r=p(),o=t,i=m(),c=y(![]),u=y(![]),f=y(![]),d=y(""),A=async()=>{const t=dt;if(!o[t(264)]?.[t(267)]&&!o["message"]["body"]?.[t(291)]("<form"))return;const e=await(new G)[t(272)](o[t(264)]?.["id"],r[t(284)]["person"]["id"]);if(o[t(264)]?.["form"]){c[t(307)]=new O(o[t(264)]?.[t(267)]);if(e[t(299)][t(294)][t(263)]!==void 0&&e[t(299)][t(294)][t(263)]!==null){const n=e[t(299)][t(294)][t(263)][0]?.[t(315)],r=n?.[t(274)]?JSON[t(283)](n["result"]):{};c[t(307)]=new O(o["message"]?.["form"],r),u[t(307)]=n||![]}else c[t(307)]=new O(o[t(264)]?.[t(267)])}else if(o[t(264)][t(288)]?.[t(291)]("<form"))if(e[t(299)][t(294)][t(263)]!==void 0&&e[t(299)]["surveyresults"][t(263)]!==null){const n=e[t(299)][t(294)][t(263)][0]?.[t(315)];n&&H(n)}else d[t(307)]=o[t(264)]?.[t(288)]?.[t(277)](/<form.*?>/,"")[t(277)](/<\/form>/,"")["replace"]('<input type="submit" value="Senden">',"")};function H(t){const e=dt,n=t?.[e(274)]?JSON[e(283)](t[e(274)]):{};u["value"]=t||![];const r=document["createElement"]("form");r[e(278)]=o[e(264)]?.[e(288)]?.["replace"](/<form.*?>/,"")[e(277)](/<\/form>/,"")??"",Object["entries"](n)[e(273)]((([t,n])=>{const s=e;if(n){const e=r[s(312)](s(265)+t+'"]');e[s(273)]((t=>{const e=s;if(t instanceof HTMLInputElement)t[e(293)]==="radio"||t["type"]==="checkbox"?t[e(307)]===n?t[e(270)]("checked","checked"):t[e(268)]("checked"):t[e(270)]("value",n);else if(t instanceof HTMLSelectElement){const r=t[e(312)](e(262));r["forEach"]((t=>{const r=e;t[r(307)]===n?t[r(270)]("selected","selected"):t[r(268)]("selected")}))}else t instanceof HTMLTextAreaElement&&(t[e(278)]=n)}))}})),d[e(307)]=r[e(289)]["replace"](/<form.*?>/,"")[e(277)](/<\/form>/,"")[e(277)]('<input type="submit" value="Senden">',"")}A();async function U(t){const e=dt;f[e(307)]=!![];const n=t[e(282)],s=new FormData(n),a={};s["forEach"](((t,e)=>a[e]=t));if(a)if(u[e(307)]!==![]){const t=await(new G)[e(311)]({id:u[e(307)]["id"],result:JSON[e(275)](a)});t?(L(i[e(297)]),H(t)):l(i["formSubmitError"])}else{const t=await(new G)[e(300)]({result:JSON[e(275)](a),message:o[e(264)]?.["id"],person:r[e(284)][e(313)]["id"]});t?(L(i["formSubmitSuccess"]),H(t)):l(i[e(302)])}f["value"]=![]}const q=async()=>{const t=dt;if(!V[t(307)]?.[t(292)]()){D(i[t(258)]);return}f["value"]=!![];const e=await(V["value"]?.["getFormSubmission"]())||null;if(e)if(u[t(307)]!==![]){const n=await(new G)["updateSurveyResult"]({id:u[t(307)]["id"],result:JSON[t(275)](e)});n?(L(i[t(297)]),u[t(307)]=n):l(i["formSubmitError"])}else{const n=await(new G)[t(300)]({result:JSON[t(275)](e),message:o["message"]?.["id"],person:r[t(284)][t(313)]["id"]});n?(L(i[t(297)]),u[t(307)]=n):l(i["formSubmitError"])}f[t(307)]=![],A()};h((()=>o[e(264)]),(t=>{const n=e;c[n(307)]=t[n(267)]?new O(t["form"]):![],A()}));const N=n((()=>u[e(307)]||null)),V=n((()=>c[e(307)]||null)),j=n((()=>!!o[e(264)]?.[e(285)])),z=n((()=>j[e(307)]&&!!N[e(307)]?.[e(304)])),B=n((()=>!j[e(307)]||!!N[e(307)]&&!N[e(307)][e(304)])),P=n((()=>!f[e(307)]&&(!o[e(280)]||!!N[e(307)]))),Y=n((()=>j["value"]&&(!N[e(307)]||!!N[e(307)]?.["iCanEdit"])&&!!V["value"]?.[e(286)]())),C=n((()=>j[e(307)]&&(!N[e(307)]||!!N[e(307)]?.[e(304)])));return(t,n)=>{const r=e;return V["value"]&&P[r(307)]?(a(),s("div",et,[b("div",nt,S(V["value"]["form"]["title"]),1),z["value"]?(a(),s("div",rt," Du hast das Formular bereits ausgefüllt. Du kannst deine Angaben hier weiterhin aktualisieren. ")):B[r(307)]?(a(),s("div",st," Dieses Formular kann derzeit nicht bearbeitet werden. Entweder ist der Eingabezeitraum abgelaufen oder eine Bearbeitung ist aktuell nicht möglich. ")):v("",!![]),(a(!![]),s(g,null,w(V[r(307)][r(257)](),(t=>{const e=r;return a(),I(J,{key:t["id"],formManager:V[e(307)],element:t,context:"default"},null,8,["formManager","element"])})),128)),b("div",ot,[Y[r(307)]?(a(),I(_,{key:0,label:E(i)[r(266)],icon:"isy isy_sent",alignment:"left",onClick:q},{default:k((()=>[M(S(E(i)[r(266)]),1)])),_:1},8,["label"])):v("",!![])])])):d[r(307)]&&!f["value"]?(a(),s("div",at,[z[r(307)]?(a(),s("div",it," Du hast das Formular bereits ausgefüllt. Du kannst deine Angaben hier weiterhin aktualisieren. ")):B[r(307)]?(a(),s("div",ct," Dieses Formular kann derzeit nicht bearbeitet werden. Entweder ist der Eingabezeitraum abgelaufen oder eine Bearbeitung ist aktuell nicht möglich. ")):v("",!![]),b("form",{onSubmit:T(U,["prevent"])},[b("div",ut,[b("div",{class:"pb-4",innerHTML:d["value"]},null,8,lt),C[r(307)]?(a(),I(R,{key:0,mode:"submitButton",label:E(i)[r(266)],icon:"sent",iconSet:"isy"},null,8,["label"])):v("",!![])])],32)])):f[r(307)]?(a(),s("div",ft,[F(E(x),{class:"w-8 h-8 mr-2 animate-spin"})])):v("",!![])}}});const yt=i(mt,[["__scopeId","data-v-39fbc529"]]);export{x as L,z as _,yt as a};
